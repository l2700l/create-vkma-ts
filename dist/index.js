"use strict";var Sl=Object.create;var Or=Object.defineProperty;var Ol=Object.getOwnPropertyDescriptor;var Rl=Object.getOwnPropertyNames;var El=Object.getPrototypeOf,Al=Object.prototype.hasOwnProperty;var y=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Pl=(e,t,s,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of Rl(t))!Al.call(e,i)&&i!==s&&Or(e,i,{get:()=>t[i],enumerable:!(r=Ol(t,i))||r.enumerable});return e};var vt=(e,t,s)=>(s=e!=null?Sl(El(e)):{},Pl(t||!e||!e.__esModule?Or(s,"default",{value:e,enumerable:!0}):s,e));var Pr=y((Id,Gt)=>{"use strict";var Fl=typeof process<"u"&&process.env.TERM_PROGRAM==="Hyper",jl=typeof process<"u"&&process.platform==="win32",Rr=typeof process<"u"&&process.platform==="linux",De={ballotDisabled:"\u2612",ballotOff:"\u2610",ballotOn:"\u2611",bullet:"\u2022",bulletWhite:"\u25E6",fullBlock:"\u2588",heart:"\u2764",identicalTo:"\u2261",line:"\u2500",mark:"\u203B",middot:"\xB7",minus:"\uFF0D",multiplication:"\xD7",obelus:"\xF7",pencilDownRight:"\u270E",pencilRight:"\u270F",pencilUpRight:"\u2710",percent:"%",pilcrow2:"\u2761",pilcrow:"\xB6",plusMinus:"\xB1",question:"?",section:"\xA7",starsOff:"\u2606",starsOn:"\u2605",upDownArrow:"\u2195"},Er=Object.assign({},De,{check:"\u221A",cross:"\xD7",ellipsisLarge:"...",ellipsis:"...",info:"i",questionSmall:"?",pointer:">",pointerSmall:"\xBB",radioOff:"( )",radioOn:"(*)",warning:"\u203C"}),Ar=Object.assign({},De,{ballotCross:"\u2718",check:"\u2714",cross:"\u2716",ellipsisLarge:"\u22EF",ellipsis:"\u2026",info:"\u2139",questionFull:"\uFF1F",questionSmall:"\uFE56",pointer:Rr?"\u25B8":"\u276F",pointerSmall:Rr?"\u2023":"\u203A",radioOff:"\u25EF",radioOn:"\u25C9",warning:"\u26A0"});Gt.exports=jl&&!Fl?Er:Ar;Reflect.defineProperty(Gt.exports,"common",{enumerable:!1,value:De});Reflect.defineProperty(Gt.exports,"windows",{enumerable:!1,value:Er});Reflect.defineProperty(Gt.exports,"other",{enumerable:!1,value:Ar})});var ie=y((Ld,Be)=>{"use strict";var ql=e=>e!==null&&typeof e=="object"&&!Array.isArray(e),$l=/[\u001b\u009b][[\]#;?()]*(?:(?:(?:[^\W_]*;?[^\W_]*)\u0007)|(?:(?:[0-9]{1,4}(;[0-9]{0,4})*)?[~0-9=<>cf-nqrtyA-PRZ]))/g,Ml=()=>typeof process<"u"?process.env.FORCE_COLOR!=="0":!1,Fr=()=>{let e={enabled:Ml(),visible:!0,styles:{},keys:{}},t=n=>{let a=n.open=`\x1B[${n.codes[0]}m`,o=n.close=`\x1B[${n.codes[1]}m`,l=n.regex=new RegExp(`\\u001b\\[${n.codes[1]}m`,"g");return n.wrap=(u,h)=>{u.includes(o)&&(u=u.replace(l,o+a));let c=a+u+o;return h?c.replace(/\r*\n/g,`${o}$&${a}`):c},n},s=(n,a,o)=>typeof n=="function"?n(a):n.wrap(a,o),r=(n,a)=>{if(n===""||n==null)return"";if(e.enabled===!1)return n;if(e.visible===!1)return"";let o=""+n,l=o.includes(`
`),u=a.length;for(u>0&&a.includes("unstyle")&&(a=[...new Set(["unstyle",...a])].reverse());u-- >0;)o=s(e.styles[a[u]],o,l);return o},i=(n,a,o)=>{e.styles[n]=t({name:n,codes:a}),(e.keys[o]||(e.keys[o]=[])).push(n),Reflect.defineProperty(e,n,{configurable:!0,enumerable:!0,set(u){e.alias(n,u)},get(){let u=h=>r(h,u.stack);return Reflect.setPrototypeOf(u,e),u.stack=this.stack?this.stack.concat(n):[n],u}})};return i("reset",[0,0],"modifier"),i("bold",[1,22],"modifier"),i("dim",[2,22],"modifier"),i("italic",[3,23],"modifier"),i("underline",[4,24],"modifier"),i("inverse",[7,27],"modifier"),i("hidden",[8,28],"modifier"),i("strikethrough",[9,29],"modifier"),i("black",[30,39],"color"),i("red",[31,39],"color"),i("green",[32,39],"color"),i("yellow",[33,39],"color"),i("blue",[34,39],"color"),i("magenta",[35,39],"color"),i("cyan",[36,39],"color"),i("white",[37,39],"color"),i("gray",[90,39],"color"),i("grey",[90,39],"color"),i("bgBlack",[40,49],"bg"),i("bgRed",[41,49],"bg"),i("bgGreen",[42,49],"bg"),i("bgYellow",[43,49],"bg"),i("bgBlue",[44,49],"bg"),i("bgMagenta",[45,49],"bg"),i("bgCyan",[46,49],"bg"),i("bgWhite",[47,49],"bg"),i("blackBright",[90,39],"bright"),i("redBright",[91,39],"bright"),i("greenBright",[92,39],"bright"),i("yellowBright",[93,39],"bright"),i("blueBright",[94,39],"bright"),i("magentaBright",[95,39],"bright"),i("cyanBright",[96,39],"bright"),i("whiteBright",[97,39],"bright"),i("bgBlackBright",[100,49],"bgBright"),i("bgRedBright",[101,49],"bgBright"),i("bgGreenBright",[102,49],"bgBright"),i("bgYellowBright",[103,49],"bgBright"),i("bgBlueBright",[104,49],"bgBright"),i("bgMagentaBright",[105,49],"bgBright"),i("bgCyanBright",[106,49],"bgBright"),i("bgWhiteBright",[107,49],"bgBright"),e.ansiRegex=$l,e.hasColor=e.hasAnsi=n=>(e.ansiRegex.lastIndex=0,typeof n=="string"&&n!==""&&e.ansiRegex.test(n)),e.alias=(n,a)=>{let o=typeof a=="string"?e[a]:a;if(typeof o!="function")throw new TypeError("Expected alias to be the name of an existing color (string) or a function");o.stack||(Reflect.defineProperty(o,"name",{value:n}),e.styles[n]=o,o.stack=[n]),Reflect.defineProperty(e,n,{configurable:!0,enumerable:!0,set(l){e.alias(n,l)},get(){let l=u=>r(u,l.stack);return Reflect.setPrototypeOf(l,e),l.stack=this.stack?this.stack.concat(o.stack):o.stack,l}})},e.theme=n=>{if(!ql(n))throw new TypeError("Expected theme to be an object");for(let a of Object.keys(n))e.alias(a,n[a]);return e},e.alias("unstyle",n=>typeof n=="string"&&n!==""?(e.ansiRegex.lastIndex=0,n.replace(e.ansiRegex,"")):""),e.alias("noop",n=>n),e.none=e.clear=e.noop,e.stripColor=e.unstyle,e.symbols=Pr(),e.define=i,e};Be.exports=Fr();Be.exports.create=Fr});var z=y(T=>{"use strict";var Il=Object.prototype.toString,tt=ie(),jr=!1,zt=new Set,qr={yellow:"blue",cyan:"red",green:"magenta",black:"white",blue:"yellow",red:"cyan",magenta:"green",white:"black"};T.longest=(e,t)=>e.reduce((s,r)=>Math.max(s,t?r[t].length:r.length),0);T.hasColor=e=>!!e&&tt.hasColor(e);var ne=T.isObject=e=>e!==null&&typeof e=="object"&&!Array.isArray(e);T.nativeType=e=>Il.call(e).slice(8,-1).toLowerCase().replace(/\s/g,"");T.isAsyncFn=e=>T.nativeType(e)==="asyncfunction";T.isPrimitive=e=>e!=null&&typeof e!="object"&&typeof e!="function";T.resolve=(e,t,...s)=>typeof t=="function"?t.call(e,...s):t;T.scrollDown=(e=[])=>[...e.slice(1),e[0]];T.scrollUp=(e=[])=>[e.pop(),...e];T.reorder=(e=[])=>{let t=e.slice();return t.sort((s,r)=>s.index>r.index?1:s.index<r.index?-1:0),t};T.swap=(e,t,s)=>{let r=e.length,i=s===r?0:s<0?r-1:s,n=e[t];e[t]=e[i],e[i]=n};T.width=(e,t=80)=>{let s=e&&e.columns?e.columns:t;return e&&typeof e.getWindowSize=="function"&&(s=e.getWindowSize()[0]),process.platform==="win32"?s-1:s};T.height=(e,t=20)=>{let s=e&&e.rows?e.rows:t;return e&&typeof e.getWindowSize=="function"&&(s=e.getWindowSize()[1]),s};T.wordWrap=(e,t={})=>{if(!e)return e;typeof t=="number"&&(t={width:t});let{indent:s="",newline:r=`
`+s,width:i=80}=t,n=(r+s).match(/[^\S\n]/g)||[];i-=n.length;let a=`.{1,${i}}([\\s\\u200B]+|$)|[^\\s\\u200B]+?([\\s\\u200B]+|$)`,o=e.trim(),l=new RegExp(a,"g"),u=o.match(l)||[];return u=u.map(h=>h.replace(/\n$/,"")),t.padEnd&&(u=u.map(h=>h.padEnd(i," "))),t.padStart&&(u=u.map(h=>h.padStart(i," "))),s+u.join(r)};T.unmute=e=>{let t=e.stack.find(r=>tt.keys.color.includes(r));return t?tt[t]:e.stack.find(r=>r.slice(2)==="bg")?tt[t.slice(2)]:r=>r};T.pascal=e=>e?e[0].toUpperCase()+e.slice(1):"";T.inverse=e=>{if(!e||!e.stack)return e;let t=e.stack.find(r=>tt.keys.color.includes(r));if(t){let r=tt["bg"+T.pascal(t)];return r?r.black:e}let s=e.stack.find(r=>r.slice(0,2)==="bg");return s?tt[s.slice(2).toLowerCase()]||e:tt.none};T.complement=e=>{if(!e||!e.stack)return e;let t=e.stack.find(r=>tt.keys.color.includes(r)),s=e.stack.find(r=>r.slice(0,2)==="bg");if(t&&!s)return tt[qr[t]||t];if(s){let r=s.slice(2).toLowerCase(),i=qr[r];return i&&tt["bg"+T.pascal(i)]||e}return tt.none};T.meridiem=e=>{let t=e.getHours(),s=e.getMinutes(),r=t>=12?"pm":"am";t=t%12;let i=t===0?12:t,n=s<10?"0"+s:s;return i+":"+n+" "+r};T.set=(e={},t="",s)=>t.split(".").reduce((r,i,n,a)=>{let o=a.length-1>n?r[i]||{}:s;return!T.isObject(o)&&n<a.length-1&&(o={}),r[i]=o},e);T.get=(e={},t="",s)=>{let r=e[t]==null?t.split(".").reduce((i,n)=>i&&i[n],e):e[t];return r??s};T.mixin=(e,t)=>{if(!ne(e))return t;if(!ne(t))return e;for(let s of Object.keys(t)){let r=Object.getOwnPropertyDescriptor(t,s);if(hasOwnProperty.call(r,"value"))if(hasOwnProperty.call(e,s)&&ne(r.value)){let i=Object.getOwnPropertyDescriptor(e,s);ne(i.value)&&i.value!==r.value?e[s]=T.merge({},e[s],t[s]):Reflect.defineProperty(e,s,r)}else Reflect.defineProperty(e,s,r);else Reflect.defineProperty(e,s,r)}return e};T.merge=(...e)=>{let t={};for(let s of e)T.mixin(t,s);return t};T.mixinEmitter=(e,t)=>{let s=t.constructor.prototype;for(let r of Object.keys(s)){let i=s[r];typeof i=="function"?T.define(e,r,i.bind(t)):T.define(e,r,i)}};var ae=(e,t)=>{jr||(jr=!0,zt.forEach(s=>s()),e===!0&&process.exit(128+t))},$r=ae.bind(null,!0,15),Mr=ae.bind(null,!0,2);T.onExit=e=>(zt.size===0&&(process.once("SIGTERM",$r),process.once("SIGINT",Mr),process.once("exit",ae)),zt.add(e),()=>{zt.delete(e),zt.size===0&&(process.off("SIGTERM",$r),process.off("SIGINT",Mr),process.off("exit",ae))});T.define=(e,t,s)=>{Reflect.defineProperty(e,t,{value:s})};T.defineExport=(e,t,s)=>{let r;Reflect.defineProperty(e,t,{enumerable:!0,configurable:!0,set(i){r=i},get(){return r?r():s()}})}});var Lr=y((Bd,Ir)=>{"use strict";Ir.exports=({onlyFirst:e=!1}={})=>{let t=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|");return new RegExp(t,e?void 0:"g")}});var ft=y((Nd,Dr)=>{"use strict";var Ll=Lr();Dr.exports=e=>typeof e=="string"?e.replace(Ll(),""):e});var Br=y(At=>{"use strict";At.ctrl={a:"first",b:"backward",c:"cancel",d:"deleteForward",e:"last",f:"forward",g:"reset",i:"tab",k:"cutForward",l:"reset",n:"newItem",m:"cancel",j:"submit",p:"search",r:"remove",s:"save",u:"undo",w:"cutLeft",x:"toggleCursor",v:"paste"};At.shift={up:"shiftUp",down:"shiftDown",left:"shiftLeft",right:"shiftRight",tab:"prev"};At.fn={up:"pageUp",down:"pageDown",left:"pageLeft",right:"pageRight",delete:"deleteForward"};At.option={b:"backward",f:"forward",d:"cutRight",left:"cutLeft",up:"altUp",down:"altDown"};At.keys={pageup:"pageUp",pagedown:"pageDown",home:"home",end:"end",cancel:"cancel",delete:"deleteForward",backspace:"delete",down:"down",enter:"submit",escape:"cancel",left:"left",space:"space",number:"number",return:"submit",right:"right",tab:"next",up:"up"}});var Gr=y((Ud,Nr)=>{"use strict";Nr.exports=class{_queue=[];_executing=!1;_jobRunner=null;constructor(t){this._jobRunner=t}enqueue=(...t)=>{this._queue.push(t),this._dequeue()};destroy(){this._queue.length=0,this._jobRunner=null}_dequeue(){this._executing||!this._queue.length||(this._executing=!0,this._jobRunner(...this._queue.shift()),setTimeout(()=>{this._executing=!1,this._dequeue()}))}}});var Ne=y((Wd,Ur)=>{"use strict";var zr=require("readline"),Dl=Br(),Bl=Gr(),Nl=/^(?:\x1b)([a-zA-Z0-9])$/,Gl=/^(?:\x1b+)(O|N|\[|\[\[)(?:(\d+)(?:;(\d+))?([~^$])|(?:1;)?(\d+)?([a-zA-Z]))/,zl={OP:"f1",OQ:"f2",OR:"f3",OS:"f4","[11~":"f1","[12~":"f2","[13~":"f3","[14~":"f4","[[A":"f1","[[B":"f2","[[C":"f3","[[D":"f4","[[E":"f5","[15~":"f5","[17~":"f6","[18~":"f7","[19~":"f8","[20~":"f9","[21~":"f10","[23~":"f11","[24~":"f12","[A":"up","[B":"down","[C":"right","[D":"left","[E":"clear","[F":"end","[H":"home",OA:"up",OB:"down",OC:"right",OD:"left",OE:"clear",OF:"end",OH:"home","[1~":"home","[2~":"insert","[3~":"delete","[4~":"end","[5~":"pageup","[6~":"pagedown","[[5~":"pageup","[[6~":"pagedown","[7~":"home","[8~":"end","[a":"up","[b":"down","[c":"right","[d":"left","[e":"clear","[2$":"insert","[3$":"delete","[5$":"pageup","[6$":"pagedown","[7$":"home","[8$":"end",Oa:"up",Ob:"down",Oc:"right",Od:"left",Oe:"clear","[2^":"insert","[3^":"delete","[5^":"pageup","[6^":"pagedown","[7^":"home","[8^":"end","[Z":"tab"};function Ul(e){return["[a","[b","[c","[d","[e","[2$","[3$","[5$","[6$","[7$","[8$","[Z"].includes(e)}function Wl(e){return["Oa","Ob","Oc","Od","Oe","[2^","[3^","[5^","[6^","[7^","[8^"].includes(e)}var oe=(e="",t={})=>{let s,r={name:t.name,ctrl:!1,meta:!1,shift:!1,option:!1,sequence:e,raw:e,...t};if(Buffer.isBuffer(e)?e[0]>127&&e[1]===void 0?(e[0]-=128,e="\x1B"+String(e)):e=String(e):e!==void 0&&typeof e!="string"?e=String(e):e||(e=r.sequence||""),r.sequence=r.sequence||e||r.name,e==="\r")r.raw=void 0,r.name="return";else if(e===`
`)r.name="enter";else if(e==="	")r.name="tab";else if(e==="\b"||e==="\x7F"||e==="\x1B\x7F"||e==="\x1B\b")r.name="backspace",r.meta=e.charAt(0)==="\x1B";else if(e==="\x1B"||e==="\x1B\x1B")r.name="escape",r.meta=e.length===2;else if(e===" "||e==="\x1B ")r.name="space",r.meta=e.length===2;else if(e<="")r.name=String.fromCharCode(e.charCodeAt(0)+97-1),r.ctrl=!0;else if(e.length===1&&e>="0"&&e<="9")r.name="number";else if(e.length===1&&e>="a"&&e<="z")r.name=e;else if(e.length===1&&e>="A"&&e<="Z")r.name=e.toLowerCase(),r.shift=!0;else if(s=Nl.exec(e))r.meta=!0,r.shift=/^[A-Z]$/.test(s[1]);else if(s=Gl.exec(e)){let i=[...e];i[0]==="\x1B"&&i[1]==="\x1B"&&(r.option=!0);let n=[s[1],s[2],s[4],s[6]].filter(Boolean).join(""),a=(s[3]||s[5]||1)-1;r.ctrl=!!(a&4),r.meta=!!(a&10),r.shift=!!(a&1),r.code=n,r.name=zl[n],r.shift=Ul(n)||r.shift,r.ctrl=Wl(n)||r.ctrl}return r};oe.listen=(e={},t)=>{let{stdin:s}=e;if(!s||s!==process.stdin&&!s.isTTY)throw new Error("Invalid stream passed");let r=zr.createInterface({terminal:!0,input:s});zr.emitKeypressEvents(s,r);let i=new Bl((o,l)=>t(o,oe(o,l),r)),n=s.isRaw;return s.isTTY&&s.setRawMode(!0),s.on("keypress",i.enqueue),r.resume(),()=>{s.isTTY&&s.setRawMode(n),s.removeListener("keypress",i.enqueue),i.destroy(),r.pause(),r.close()}};oe.action=(e,t,s)=>{let r={...Dl,...s};return t.ctrl?(t.action=r.ctrl[t.name],t):t.option&&r.option?(t.action=r.option[t.name],t):t.shift?(t.action=r.shift[t.name],t):(t.action=r.keys[t.name],t)};Ur.exports=oe});var Hr=y((Hd,Wr)=>{"use strict";Wr.exports=e=>{e.timers=e.timers||{};let t=e.options.timers;if(t)for(let s of Object.keys(t)){let r=t[s];typeof r=="number"&&(r={interval:r}),Hl(e,s,r)}};function Hl(e,t,s={}){let r=e.timers[t]={name:t,start:Date.now(),ms:0,tick:0},i=s.interval||120;r.frames=s.frames||[],r.loading=!0;let n=setInterval(()=>{r.ms=Date.now()-r.start,r.tick++,e.render()},i);return r.stop=()=>{r.loading=!1,clearInterval(n)},Reflect.defineProperty(r,"interval",{value:n}),e.once("close",()=>r.stop()),r.stop}});var Kr=y((Vd,Vr)=>{"use strict";var{define:Vl,width:Kl}=z(),Ge=class{constructor(t){let s=t.options;Vl(this,"_prompt",t),this.type=t.type,this.name=t.name,this.message="",this.header="",this.footer="",this.error="",this.hint="",this.input="",this.cursor=0,this.index=0,this.lines=0,this.tick=0,this.prompt="",this.buffer="",this.width=Kl(s.stdout||process.stdout),Object.assign(this,s),this.name=this.name||this.message,this.message=this.message||this.name,this.symbols=t.symbols,this.styles=t.styles,this.required=new Set,this.cancelled=!1,this.submitted=!1}clone(){let t={...this};return t.status=this.status,t.buffer=Buffer.from(t.buffer),delete t.clone,t}set color(t){this._color=t}get color(){let t=this.prompt.styles;if(this.cancelled)return t.cancelled;if(this.submitted)return t.submitted;let s=this._color||t[this.status];return typeof s=="function"?s:t.pending}set loading(t){this._loading=t}get loading(){return typeof this._loading=="boolean"?this._loading:this.loadingChoices?"choices":!1}get status(){return this.cancelled?"cancelled":this.submitted?"submitted":"pending"}};Vr.exports=Ge});var Qr=y((Kd,Yr)=>{"use strict";var ze=z(),N=ie(),Ue={default:N.noop,noop:N.noop,set inverse(e){this._inverse=e},get inverse(){return this._inverse||ze.inverse(this.primary)},set complement(e){this._complement=e},get complement(){return this._complement||ze.complement(this.primary)},primary:N.cyan,success:N.green,danger:N.magenta,strong:N.bold,warning:N.yellow,muted:N.dim,disabled:N.gray,dark:N.dim.gray,underline:N.underline,set info(e){this._info=e},get info(){return this._info||this.primary},set em(e){this._em=e},get em(){return this._em||this.primary.underline},set heading(e){this._heading=e},get heading(){return this._heading||this.muted.underline},set pending(e){this._pending=e},get pending(){return this._pending||this.primary},set submitted(e){this._submitted=e},get submitted(){return this._submitted||this.success},set cancelled(e){this._cancelled=e},get cancelled(){return this._cancelled||this.danger},set typing(e){this._typing=e},get typing(){return this._typing||this.dim},set placeholder(e){this._placeholder=e},get placeholder(){return this._placeholder||this.primary.dim},set highlight(e){this._highlight=e},get highlight(){return this._highlight||this.inverse}};Ue.merge=(e={})=>{e.styles&&typeof e.styles.enabled=="boolean"&&(N.enabled=e.styles.enabled),e.styles&&typeof e.styles.visible=="boolean"&&(N.visible=e.styles.visible);let t=ze.merge({},Ue,e.styles);delete t.merge;for(let s of Object.keys(N))hasOwnProperty.call(t,s)||Reflect.defineProperty(t,s,{get:()=>N[s]});for(let s of Object.keys(N.styles))hasOwnProperty.call(t,s)||Reflect.defineProperty(t,s,{get:()=>N[s]});return t};Yr.exports=Ue});var Jr=y((Yd,Zr)=>{"use strict";var We=process.platform==="win32",ut=ie(),Yl=z(),He={...ut.symbols,upDownDoubleArrow:"\u21D5",upDownDoubleArrow2:"\u2B0D",upDownArrow:"\u2195",asterisk:"*",asterism:"\u2042",bulletWhite:"\u25E6",electricArrow:"\u2301",ellipsisLarge:"\u22EF",ellipsisSmall:"\u2026",fullBlock:"\u2588",identicalTo:"\u2261",indicator:ut.symbols.check,leftAngle:"\u2039",mark:"\u203B",minus:"\u2212",multiplication:"\xD7",obelus:"\xF7",percent:"%",pilcrow:"\xB6",pilcrow2:"\u2761",pencilUpRight:"\u2710",pencilDownRight:"\u270E",pencilRight:"\u270F",plus:"+",plusMinus:"\xB1",pointRight:"\u261E",rightAngle:"\u203A",section:"\xA7",hexagon:{off:"\u2B21",on:"\u2B22",disabled:"\u2B22"},ballot:{on:"\u2611",off:"\u2610",disabled:"\u2612"},stars:{on:"\u2605",off:"\u2606",disabled:"\u2606"},folder:{on:"\u25BC",off:"\u25B6",disabled:"\u25B6"},prefix:{pending:ut.symbols.question,submitted:ut.symbols.check,cancelled:ut.symbols.cross},separator:{pending:ut.symbols.pointerSmall,submitted:ut.symbols.middot,cancelled:ut.symbols.middot},radio:{off:We?"( )":"\u25EF",on:We?"(*)":"\u25C9",disabled:We?"(|)":"\u24BE"},numbers:["\u24EA","\u2460","\u2461","\u2462","\u2463","\u2464","\u2465","\u2466","\u2467","\u2468","\u2469","\u246A","\u246B","\u246C","\u246D","\u246E","\u246F","\u2470","\u2471","\u2472","\u2473","\u3251","\u3252","\u3253","\u3254","\u3255","\u3256","\u3257","\u3258","\u3259","\u325A","\u325B","\u325C","\u325D","\u325E","\u325F","\u32B1","\u32B2","\u32B3","\u32B4","\u32B5","\u32B6","\u32B7","\u32B8","\u32B9","\u32BA","\u32BB","\u32BC","\u32BD","\u32BE","\u32BF"]};He.merge=e=>{let t=Yl.merge({},ut.symbols,He,e.symbols);return delete t.merge,t};Zr.exports=He});var ti=y((Qd,Xr)=>{"use strict";var Ql=Qr(),Zl=Jr(),Jl=z();Xr.exports=e=>{e.options=Jl.merge({},e.options.theme,e.options),e.symbols=Zl.merge(e.options),e.styles=Ql.merge(e.options)}});var ni=y((ri,ii)=>{"use strict";var ei=process.env.TERM_PROGRAM==="Apple_Terminal",Xl=ft(),Ve=z(),it=ii.exports=ri,F="\x1B[",si="\x07",Ke=!1,dt=it.code={bell:si,beep:si,beginning:`${F}G`,down:`${F}J`,esc:F,getPosition:`${F}6n`,hide:`${F}?25l`,line:`${F}2K`,lineEnd:`${F}K`,lineStart:`${F}1K`,restorePosition:F+(ei?"8":"u"),savePosition:F+(ei?"7":"s"),screen:`${F}2J`,show:`${F}?25h`,up:`${F}1J`},kt=it.cursor={get hidden(){return Ke},hide(){return Ke=!0,dt.hide},show(){return Ke=!1,dt.show},forward:(e=1)=>`${F}${e}C`,backward:(e=1)=>`${F}${e}D`,nextLine:(e=1)=>`${F}E`.repeat(e),prevLine:(e=1)=>`${F}F`.repeat(e),up:(e=1)=>e?`${F}${e}A`:"",down:(e=1)=>e?`${F}${e}B`:"",right:(e=1)=>e?`${F}${e}C`:"",left:(e=1)=>e?`${F}${e}D`:"",to(e,t){return t?`${F}${t+1};${e+1}H`:`${F}${e+1}G`},move(e=0,t=0){let s="";return s+=e<0?kt.left(-e):e>0?kt.right(e):"",s+=t<0?kt.up(-t):t>0?kt.down(t):"",s},strLen(e){for(var t=0,s=e.length,r=-1,i=0;i<s;i++)r=e.charCodeAt(i),r>=0&&r<=128?t+=1:t+=2;return t},restore(e={}){let{after:t,cursor:s,initial:r,input:i,prompt:n,size:a,value:o}=e;if(r=Ve.isPrimitive(r)?String(r):"",i=Ve.isPrimitive(i)?String(i):"",o=Ve.isPrimitive(o)?String(o):"",a){let l=it.cursor.up(a)+it.cursor.to(this.strLen(n)),u=i.length-s;return u>0&&(l+=it.cursor.left(u)),l}if(o||t){let l=!i&&r?-this.strLen(r):-this.strLen(i)+s;return t&&(l-=this.strLen(t)),i===""&&r&&!n.includes(r)&&(l+=this.strLen(r)),it.cursor.move(l)}}},Ye=it.erase={screen:dt.screen,up:dt.up,down:dt.down,line:dt.line,lineEnd:dt.lineEnd,lineStart:dt.lineStart,lines(e){let t="";for(let s=0;s<e;s++)t+=it.erase.line+(s<e-1?it.cursor.up(1):"");return e&&(t+=it.code.beginning),t}};it.clear=(e="",t=process.stdout.columns)=>{if(!t)return Ye.line+kt.to(0);let s=n=>[...Xl(n)].length,r=e.split(/\r?\n/),i=0;for(let n of r)i+=1+Math.floor(Math.max(s(n)-1,0)/t);return(Ye.line+kt.prevLine()).repeat(i-1)+Ye.line+kt.to(0)}});var Pt=y((Zd,oi)=>{"use strict";var tu=require("events"),ai=ft(),Qe=Ne(),eu=Hr(),su=Kr(),ru=ti(),V=z(),_t=ni(),Ze=class e extends tu{constructor(t={}){super(),this.name=t.name,this.type=t.type,this.options=t,ru(this),eu(this),this.state=new su(this),this.initial=[t.initial,t.default].find(s=>s!=null),this.stdout=t.stdout||process.stdout,this.stdin=t.stdin||process.stdin,this.scale=t.scale||1,this.term=this.options.term||process.env.TERM_PROGRAM,this.margin=nu(this.options.margin),this.setMaxListeners(0),iu(this)}async keypress(t,s={}){this.keypressed=!0;let r=Qe.action(t,Qe(t,s),this.options.actions);this.state.keypress=r,this.emit("keypress",t,r),this.emit("state",this.state.clone());let i=this.options[r.action]||this[r.action]||this.dispatch;if(typeof i=="function")return await i.call(this,t,r);this.alert()}alert(){delete this.state.alert,this.options.show===!1?this.emit("alert"):this.stdout.write(_t.code.beep)}cursorHide(){this.stdout.write(_t.cursor.hide());let t=V.onExit(()=>this.cursorShow());this.on("close",()=>{this.cursorShow(),t()})}cursorShow(){this.stdout.write(_t.cursor.show())}write(t){t&&(this.stdout&&this.state.show!==!1&&this.stdout.write(t),this.state.buffer+=t)}clear(t=0){let s=this.state.buffer;this.state.buffer="",!(!s&&!t||this.options.show===!1)&&this.stdout.write(_t.cursor.down(t)+_t.clear(s,this.width))}restore(){if(this.state.closed||this.options.show===!1)return;let{prompt:t,after:s,rest:r}=this.sections(),{cursor:i,initial:n="",input:a="",value:o=""}=this,l=this.state.size=r.length,u={after:s,cursor:i,initial:n,input:a,prompt:t,size:l,value:o},h=_t.cursor.restore(u);h&&this.stdout.write(h)}sections(){let{buffer:t,input:s,prompt:r}=this.state;r=ai(r);let i=ai(t),n=i.indexOf(r),a=i.slice(0,n),l=i.slice(n).split(`
`),u=l[0],h=l[l.length-1],p=(r+(s?" "+s:"")).length,f=p<u.length?u.slice(p+1):"";return{header:a,prompt:u,after:f,rest:l.slice(1),last:h}}async submit(){this.state.submitted=!0,this.state.validating=!0,this.options.onSubmit&&await this.options.onSubmit.call(this,this.name,this.value,this);let t=this.state.error||await this.validate(this.value,this.state);if(t!==!0){let s=`
`+this.symbols.pointer+" ";typeof t=="string"?s+=t.trim():s+="Invalid input",this.state.error=`
`+this.styles.danger(s),this.state.submitted=!1,await this.render(),await this.alert(),this.state.validating=!1,this.state.error=void 0;return}this.state.validating=!1,await this.render(),await this.close(),this.value=await this.result(this.value),this.emit("submit",this.value)}async cancel(t){this.state.cancelled=this.state.submitted=!0,await this.render(),await this.close(),typeof this.options.onCancel=="function"&&await this.options.onCancel.call(this,this.name,this.value,this),this.emit("cancel",await this.error(t))}async close(){this.state.closed=!0;try{let t=this.sections(),s=Math.ceil(t.prompt.length/this.width);t.rest&&this.write(_t.cursor.down(t.rest.length)),this.write(`
`.repeat(s))}catch{}this.emit("close")}start(){!this.stop&&this.options.show!==!1&&(this.stop=Qe.listen(this,this.keypress.bind(this)),this.once("close",this.stop),this.emit("start",this))}async skip(){return this.skipped=this.options.skip===!0,typeof this.options.skip=="function"&&(this.skipped=await this.options.skip.call(this,this.name,this.value)),this.skipped}async initialize(){let{format:t,options:s,result:r}=this;if(this.format=()=>t.call(this,this.value),this.result=()=>r.call(this,this.value),typeof s.initial=="function"&&(this.initial=await s.initial.call(this,this)),typeof s.onRun=="function"&&await s.onRun.call(this,this),typeof s.onSubmit=="function"){let i=s.onSubmit.bind(this),n=this.submit.bind(this);delete this.options.onSubmit,this.submit=async()=>(await i(this.name,this.value,this),n())}await this.start(),await this.render()}render(){throw new Error("expected prompt to have a custom render method")}run(){return new Promise(async(t,s)=>{if(this.once("submit",t),this.once("cancel",s),await this.skip())return this.render=()=>{},this.submit();await this.initialize(),this.emit("run")})}async element(t,s,r){let{options:i,state:n,symbols:a,timers:o}=this,l=o&&o[t];n.timer=l;let u=i[t]||n[t]||a[t],h=s&&s[t]!=null?s[t]:await u;if(h==="")return h;let c=await this.resolve(h,n,s,r);return!c&&s&&s[t]?this.resolve(u,n,s,r):c}async prefix(){let t=await this.element("prefix")||this.symbols,s=this.timers&&this.timers.prefix,r=this.state;return r.timer=s,V.isObject(t)&&(t=t[r.status]||t.pending),V.hasColor(t)?t:(this.styles[r.status]||this.styles.pending)(t)}async message(){let t=await this.element("message");return V.hasColor(t)?t:this.styles.strong(t)}async separator(){let t=await this.element("separator")||this.symbols,s=this.timers&&this.timers.separator,r=this.state;r.timer=s;let i=t[r.status]||t.pending||r.separator,n=await this.resolve(i,r);return V.isObject(n)&&(n=n[r.status]||n.pending),V.hasColor(n)?n:this.styles.muted(n)}async pointer(t,s){let r=await this.element("pointer",t,s);if(typeof r=="string"&&V.hasColor(r))return r;if(r){let i=this.styles,n=this.index===s,a=n?i.primary:u=>u,o=await this.resolve(r[n?"on":"off"]||r,this.state),l=V.hasColor(o)?o:a(o);return n?l:" ".repeat(o.length)}}async indicator(t,s){let r=await this.element("indicator",t,s);if(typeof r=="string"&&V.hasColor(r))return r;if(r){let i=this.styles,n=t.enabled===!0,a=n?i.success:i.dark,o=r[n?"on":"off"]||r;return V.hasColor(o)?o:a(o)}return""}body(){return null}footer(){if(this.state.status==="pending")return this.element("footer")}header(){if(this.state.status==="pending")return this.element("header")}async hint(){if(this.state.status==="pending"&&!this.isValue(this.state.input)){let t=await this.element("hint");return V.hasColor(t)?t:this.styles.muted(t)}}error(t){return this.state.submitted?"":t||this.state.error}format(t){return t}result(t){return t}validate(t){return this.options.required===!0?this.isValue(t):!0}isValue(t){return t!=null&&t!==""}resolve(t,...s){return V.resolve(this,t,...s)}get base(){return e.prototype}get style(){return this.styles[this.state.status]}get height(){return this.options.rows||V.height(this.stdout,25)}get width(){return this.options.columns||V.width(this.stdout,80)}get size(){return{width:this.width,height:this.height}}set cursor(t){this.state.cursor=t}get cursor(){return this.state.cursor}set input(t){this.state.input=t}get input(){return this.state.input}set value(t){this.state.value=t}get value(){let{input:t,value:s}=this.state,r=[s,t].find(this.isValue.bind(this));return this.isValue(r)?r:this.initial}static get prompt(){return t=>new this(t).run()}};function iu(e){let t=i=>e[i]===void 0||typeof e[i]=="function",s=["actions","choices","initial","margin","roles","styles","symbols","theme","timers","value"],r=["body","footer","error","header","hint","indicator","message","prefix","separator","skip"];for(let i of Object.keys(e.options)){if(s.includes(i)||/^on[A-Z]/.test(i))continue;let n=e.options[i];typeof n=="function"&&t(i)?r.includes(i)||(e[i]=n.bind(e)):typeof e[i]!="function"&&(e[i]=n)}}function nu(e){typeof e=="number"&&(e=[e,e,e,e]);let t=[].concat(e||[]),s=i=>i%2===0?`
`:" ",r=[];for(let i=0;i<4;i++){let n=s(i);t[i]?r.push(n.repeat(t[i])):r.push("")}return r}oi.exports=Ze});var ci=y((Jd,ui)=>{"use strict";var au=z(),li={default(e,t){return t},checkbox(e,t){throw new Error("checkbox role is not implemented yet")},editable(e,t){throw new Error("editable role is not implemented yet")},expandable(e,t){throw new Error("expandable role is not implemented yet")},heading(e,t){return t.disabled="",t.indicator=[t.indicator," "].find(s=>s!=null),t.message=t.message||"",t},input(e,t){throw new Error("input role is not implemented yet")},option(e,t){return li.default(e,t)},radio(e,t){throw new Error("radio role is not implemented yet")},separator(e,t){return t.disabled="",t.indicator=[t.indicator," "].find(s=>s!=null),t.message=t.message||e.symbols.line.repeat(5),t},spacer(e,t){return t}};ui.exports=(e,t={})=>{let s=au.merge({},li,t.roles);return s[e]||s.default}});var Ut=y((Xd,di)=>{"use strict";var ou=ft(),lu=Pt(),uu=ci(),le=z(),{reorder:Je,scrollUp:cu,scrollDown:hu,isObject:hi,swap:fu}=le,Xe=class extends lu{constructor(t){super(t),this.cursorHide(),this.maxSelected=t.maxSelected||1/0,this.multiple=t.multiple||!1,this.initial=t.initial||0,this.delay=t.delay||0,this.longest=0,this.num=""}async initialize(){typeof this.options.initial=="function"&&(this.initial=await this.options.initial.call(this)),await this.reset(!0),await super.initialize()}async reset(){let{choices:t,initial:s,autofocus:r,suggest:i}=this.options;if(this.state._choices=[],this.state.choices=[],this.choices=await Promise.all(await this.toChoices(t)),this.choices.forEach(n=>n.enabled=!1),typeof i!="function"&&this.selectable.length===0)throw new Error("At least one choice must be selectable");hi(s)&&(s=Object.keys(s)),Array.isArray(s)?(r!=null&&(this.index=this.findIndex(r)),s.forEach(n=>this.enable(this.find(n))),await this.render()):(r!=null&&(s=r),typeof s=="string"&&(s=this.findIndex(s)),typeof s=="number"&&s>-1&&(this.index=Math.max(0,Math.min(s,this.choices.length)),this.enable(this.find(this.index)))),this.isDisabled(this.focused)&&await this.down()}async toChoices(t,s){this.state.loadingChoices=!0;let r=[],i=0,n=async(a,o)=>{typeof a=="function"&&(a=await a.call(this)),a instanceof Promise&&(a=await a);for(let l=0;l<a.length;l++){let u=a[l]=await this.toChoice(a[l],i++,o);r.push(u),u.choices&&await n(u.choices,u)}return r};return n(t,s).then(a=>(this.state.loadingChoices=!1,a))}async toChoice(t,s,r){if(typeof t=="function"&&(t=await t.call(this,this)),t instanceof Promise&&(t=await t),typeof t=="string"&&(t={name:t}),t.normalized)return t;t.normalized=!0;let i=t.value;if(t=uu(t.role,this.options)(this,t),typeof t.disabled=="string"&&!t.hint&&(t.hint=t.disabled,t.disabled=!0),t.disabled===!0&&t.hint==null&&(t.hint="(disabled)"),t.index!=null)return t;t.name=t.name||t.key||t.title||t.value||t.message,t.message=t.message||t.name||"",t.value=[t.value,t.name].find(this.isValue.bind(this)),t.input="",t.index=s,t.cursor=0,le.define(t,"parent",r),t.level=r?r.level+1:1,t.indent==null&&(t.indent=r?r.indent+"  ":t.indent||""),t.path=r?r.path+"."+t.name:t.name,t.enabled=!!(this.multiple&&!this.isDisabled(t)&&(t.enabled||this.isSelected(t))),this.isDisabled(t)||(this.longest=Math.max(this.longest,ou(t.message).length));let a={...t};return t.reset=(o=a.input,l=a.value)=>{for(let u of Object.keys(a))t[u]=a[u];t.input=o,t.value=l},i==null&&typeof t.initial=="function"&&(t.input=await t.initial.call(this,this.state,t,s)),t}async onChoice(t,s){this.emit("choice",t,s,this),typeof t.onChoice=="function"&&await t.onChoice.call(this,this.state,t,s)}async addChoice(t,s,r){let i=await this.toChoice(t,s,r);return this.choices.push(i),this.index=this.choices.length-1,this.limit=this.choices.length,i}async newItem(t,s,r){let i={name:"New choice name?",editable:!0,newChoice:!0,...t},n=await this.addChoice(i,s,r);return n.updateChoice=()=>{delete n.newChoice,n.name=n.message=n.input,n.input="",n.cursor=0},this.render()}indent(t){return t.indent==null?t.level>1?"  ".repeat(t.level-1):"":t.indent}dispatch(t,s){if(this.multiple&&this[s.name])return this[s.name]();this.alert()}focus(t,s){return typeof s!="boolean"&&(s=t.enabled),s&&!t.enabled&&this.selected.length>=this.maxSelected?this.alert():(this.index=t.index,t.enabled=s&&!this.isDisabled(t),t)}space(){if(!this.multiple)return this.alert();if(this.focused)return this.toggle(this.focused),this.render()}a(){if(this.maxSelected<this.choices.length)return this.alert();let t=this.selectable.every(s=>s.enabled);return this.choices.forEach(s=>s.enabled=!t),this.render()}i(){return this.choices.length-this.selected.length>this.maxSelected?this.alert():(this.choices.forEach(t=>t.enabled=!t.enabled),this.render())}g(){if(!this.choices.some(s=>!!s.parent))return this.a();let t=this.focused;return this.toggle(t.parent&&!t.choices?t.parent:t),this.render()}toggle(t,s){if(!t.enabled&&this.selected.length>=this.maxSelected)return this.alert();typeof s!="boolean"&&(s=!t.enabled),t.enabled=s,t.choices&&t.choices.forEach(i=>this.toggle(i,s));let r=t.parent;for(;r;){let i=r.choices.filter(n=>this.isDisabled(n));r.enabled=i.every(n=>n.enabled===!0),r=r.parent}return fi(this,this.choices),this.emit("toggle",t,this),t}enable(t){return this.selected.length>=this.maxSelected?this.alert():(t.enabled=!this.isDisabled(t),t.choices&&t.choices.forEach(this.enable.bind(this)),t)}disable(t){return t.enabled=!1,t.choices&&t.choices.forEach(this.disable.bind(this)),t}number(t){this.num+=t;let s=r=>{let i=Number(r);if(i>this.choices.length-1)return this.alert();let n=this.focused,a=this.choices.find(o=>i===o.index);if(!a.enabled&&this.selected.length>=this.maxSelected)return this.alert();if(this.visible.indexOf(a)===-1){let o=Je(this.choices),l=o.indexOf(a);if(n.index>l){let u=o.slice(l,l+this.limit),h=o.filter(c=>!u.includes(c));this.choices=u.concat(h)}else{let u=l-this.limit+1;this.choices=o.slice(u).concat(o.slice(0,u))}}return this.index=this.choices.indexOf(a),this.toggle(this.focused),this.render()};return clearTimeout(this.numberTimeout),new Promise(r=>{let i=this.choices.length,n=this.num,a=(o=!1,l)=>{clearTimeout(this.numberTimeout),o&&(l=s(n)),this.num="",r(l)};if(n==="0"||n.length===1&&+(n+"0")>i)return a(!0);if(Number(n)>i)return a(!1,this.alert());this.numberTimeout=setTimeout(()=>a(!0),this.delay)})}home(){return this.choices=Je(this.choices),this.index=0,this.render()}end(){let t=this.choices.length-this.limit,s=Je(this.choices);return this.choices=s.slice(t).concat(s.slice(0,t)),this.index=this.limit-1,this.render()}first(){return this.index=0,this.render()}last(){return this.index=this.visible.length-1,this.render()}prev(){return this.visible.length<=1?this.alert():this.up()}next(){return this.visible.length<=1?this.alert():this.down()}right(){return this.cursor>=this.input.length?this.alert():(this.cursor++,this.render())}left(){return this.cursor<=0?this.alert():(this.cursor--,this.render())}up(){let t=this.choices.length,s=this.visible.length,r=this.index;return this.options.scroll===!1&&r===0?this.alert():t>s&&r===0?this.scrollUp():(this.index=(r-1%t+t)%t,this.isDisabled()&&!this.allChoicesAreDisabled()?this.up():this.render())}down(){let t=this.choices.length,s=this.visible.length,r=this.index;return this.options.scroll===!1&&r===s-1?this.alert():t>s&&r===s-1?this.scrollDown():(this.index=(r+1)%t,this.isDisabled()&&!this.allChoicesAreDisabled()?this.down():this.render())}scrollUp(t=0){return this.choices=cu(this.choices),this.index=t,this.isDisabled()?this.up():this.render()}scrollDown(t=this.visible.length-1){return this.choices=hu(this.choices),this.index=t,this.isDisabled()?this.down():this.render()}async shiftUp(){if(this.options.sort===!0){this.sorting=!0,this.swap(this.index-1),await this.up(),this.sorting=!1;return}return this.scrollUp(this.index)}async shiftDown(){if(this.options.sort===!0){this.sorting=!0,this.swap(this.index+1),await this.down(),this.sorting=!1;return}return this.scrollDown(this.index)}pageUp(){return this.visible.length<=1?this.alert():(this.limit=Math.max(this.limit-1,0),this.index=Math.min(this.limit-1,this.index),this._limit=this.limit,this.isDisabled()?this.up():this.render())}pageDown(){return this.visible.length>=this.choices.length?this.alert():(this.index=Math.max(0,this.index),this.limit=Math.min(this.limit+1,this.choices.length),this._limit=this.limit,this.isDisabled()?this.down():this.render())}swap(t){fu(this.choices,this.index,t)}allChoicesAreDisabled(t=this.choices){return t.every(s=>this.isDisabled(s))}isDisabled(t=this.focused){return t&&["disabled","collapsed","hidden","completing","readonly"].some(r=>t[r]===!0)?!0:t&&t.role==="heading"}isEnabled(t=this.focused){if(Array.isArray(t))return t.every(s=>this.isEnabled(s));if(t.choices){let s=t.choices.filter(r=>!this.isDisabled(r));return t.enabled&&s.every(r=>this.isEnabled(r))}return t.enabled&&!this.isDisabled(t)}isChoice(t,s){return t.name===s||t.index===Number(s)}isSelected(t){return Array.isArray(this.initial)?this.initial.some(s=>this.isChoice(t,s)):this.isChoice(t,this.initial)}map(t=[],s="value"){return[].concat(t||[]).reduce((r,i)=>(r[i]=this.find(i,s),r),{})}filter(t,s){let i=typeof t=="function"?t:(o,l)=>[o.name,l].includes(t),a=(this.options.multiple?this.state._choices:this.choices).filter(i);return s?a.map(o=>o[s]):a}find(t,s){if(hi(t))return s?t[s]:t;let i=typeof t=="function"?t:(a,o)=>[a.name,o].includes(t),n=this.choices.find(i);if(n)return s?n[s]:n}findIndex(t){return this.choices.indexOf(this.find(t))}async submit(){let t=this.focused;if(!t)return this.alert();if(t.newChoice)return t.input?(t.updateChoice(),this.render()):this.alert();if(this.choices.some(a=>a.newChoice))return this.alert();let{reorder:s,sort:r}=this.options,i=this.multiple===!0,n=this.selected;return n===void 0?this.alert():(Array.isArray(n)&&s!==!1&&r!==!0&&(n=le.reorder(n)),this.value=i?n.map(a=>a.name):n.name,super.submit())}set choices(t=[]){this.state._choices=this.state._choices||[],this.state.choices=t;for(let s of t)this.state._choices.some(r=>r.name===s.name)||this.state._choices.push(s);if(!this._initial&&this.options.initial){this._initial=!0;let s=this.initial;if(typeof s=="string"||typeof s=="number"){let r=this.find(s);r&&(this.initial=r.index,this.focus(r,!0))}}}get choices(){return fi(this,this.state.choices||[])}set visible(t){this.state.visible=t}get visible(){return(this.state.visible||this.choices).slice(0,this.limit)}set limit(t){this.state.limit=t}get limit(){let{state:t,options:s,choices:r}=this,i=t.limit||this._limit||s.limit||r.length;return Math.min(i,this.height)}set value(t){super.value=t}get value(){return typeof super.value!="string"&&super.value===this.initial?this.input:super.value}set index(t){this.state.index=t}get index(){return Math.max(0,this.state?this.state.index:0)}get enabled(){return this.filter(this.isEnabled.bind(this))}get focused(){let t=this.choices[this.index];return t&&this.state.submitted&&this.multiple!==!0&&(t.enabled=!0),t}get selectable(){return this.choices.filter(t=>!this.isDisabled(t))}get selected(){return this.multiple?this.enabled:this.focused}};function fi(e,t){if(t instanceof Promise)return t;if(typeof t=="function"){if(le.isAsyncFn(t))return t;t=t.call(e,e)}for(let s of t){if(Array.isArray(s.choices)){let r=s.choices.filter(i=>!e.isDisabled(i));s.enabled=r.every(i=>i.enabled===!0)}e.isDisabled(s)===!0&&delete s.enabled}return t}di.exports=Xe});var pt=y((tp,pi)=>{"use strict";var du=Ut(),ts=z(),es=class extends du{constructor(t){super(t),this.emptyError=this.options.emptyError||"No items were selected"}async dispatch(t,s){if(this.multiple)return this[s.name]?await this[s.name](t,s):await super.dispatch(t,s);this.alert()}separator(){if(this.options.separator)return super.separator();let t=this.styles.muted(this.symbols.ellipsis);return this.state.submitted?super.separator():t}pointer(t,s){return!this.multiple||this.options.pointer?super.pointer(t,s):""}indicator(t,s){return this.multiple?super.indicator(t,s):""}choiceMessage(t,s){let r=this.resolve(t.message,this.state,t,s);return t.role==="heading"&&!ts.hasColor(r)&&(r=this.styles.strong(r)),this.resolve(r,this.state,t,s)}choiceSeparator(){return":"}async renderChoice(t,s){await this.onChoice(t,s);let r=this.index===s,i=await this.pointer(t,s),n=await this.indicator(t,s)+(t.pad||""),a=await this.resolve(t.hint,this.state,t,s);a&&!ts.hasColor(a)&&(a=this.styles.muted(a));let o=this.indent(t),l=await this.choiceMessage(t,s),u=()=>[this.margin[3],o+i+n,l,this.margin[1],a].filter(Boolean).join(" ");return t.role==="heading"?u():t.disabled?(ts.hasColor(l)||(l=this.styles.disabled(l)),u()):(r&&(l=this.styles.em(l)),u())}async renderChoices(){if(this.state.loading==="choices")return this.styles.warning("Loading choices");if(this.state.submitted)return"";let t=this.visible.map(async(n,a)=>await this.renderChoice(n,a)),s=await Promise.all(t);s.length||s.push(this.styles.danger("No matching choices"));let r=this.margin[0]+s.join(`
`),i;return this.options.choicesHeader&&(i=await this.resolve(this.options.choicesHeader,this.state)),[i,r].filter(Boolean).join(`
`)}format(){return!this.state.submitted||this.state.cancelled?"":Array.isArray(this.selected)?this.selected.map(t=>this.styles.primary(t.name)).join(", "):this.styles.primary(this.selected.name)}async render(){let{submitted:t,size:s}=this.state,r="",i=await this.header(),n=await this.prefix(),a=await this.separator(),o=await this.message();this.options.promptLine!==!1&&(r=[n,o,a,""].join(" "),this.state.prompt=r);let l=await this.format(),u=await this.error()||await this.hint(),h=await this.renderChoices(),c=await this.footer();l&&(r+=l),u&&!r.includes(u)&&(r+=" "+u),t&&!l&&!h.trim()&&this.multiple&&this.emptyError!=null&&(r+=this.styles.danger(this.emptyError)),this.clear(s),this.write([i,r,h,c].filter(Boolean).join(`
`)),this.write(this.margin[2]),this.restore()}};pi.exports=es});var gi=y((ep,mi)=>{"use strict";var pu=pt(),mu=(e,t)=>{let s=e?new RegExp(e,"ig"):/$^/;return r=>e?r.replace(s,i=>t(i)):r},ss=class extends pu{constructor(t){super(t),this.cursorShow()}moveCursor(t){this.state.cursor+=t}dispatch(t){return this.append(t)}space(t){return this.options.multiple?super.space(t):this.append(t)}append(t){let{cursor:s,input:r}=this.state;return this.input=r.slice(0,s)+t+r.slice(s),this.moveCursor(1),this.complete()}delete(){let{cursor:t,input:s}=this.state;return s?(this.input=s.slice(0,t-1)+s.slice(t),this.moveCursor(-1),this.complete()):this.alert()}deleteForward(){let{cursor:t,input:s}=this.state;return s[t]===void 0?this.alert():(this.input=`${s}`.slice(0,t)+`${s}`.slice(t+1),this.complete())}number(t){return this.append(t)}async complete(){this.completing=!0,this.choices=await this.suggest(this.input,this.state._choices),this.state.limit=void 0,this.index=Math.min(Math.max(this.visible.length-1,0),this.index),await this.render(),this.completing=!1}suggest(t=this.input,s=this.state._choices){if(typeof this.options.suggest=="function")return this.options.suggest.call(this,t,s);let r=t.toLowerCase();return s.filter(i=>i.message.toLowerCase().includes(r))}pointer(){return""}format(){if(!this.focused)return this.input;if(this.options.multiple&&this.state.submitted)return this.selected.map(t=>this.styles.primary(t.message)).join(", ");if(this.state.submitted){let t=this.value=this.input=this.focused.value;return this.styles.primary(t)}return this.input}async render(){if(this.state.status!=="pending")return super.render();let t=this.options.highlight||this.styles.complement,s=(n,a)=>n&&(t.stack?t(n):t.call(this,n)),r=mu(this.input,s),i=this.choices;this.choices=i.map(n=>({...n,message:r(n.message)})),await super.render(),this.choices=i}submit(){return this.options.multiple&&(this.value=this.selected.map(t=>t.name)),super.submit()}};mi.exports=ss});var is=y((sp,yi)=>{"use strict";var rs=z();yi.exports=(e,t={})=>{e.cursorHide();let{input:s="",initial:r="",pos:i,showCursor:n=!0,color:a}=t,o=a||e.styles.placeholder,l=rs.inverse(e.styles.primary),u=S=>l(e.styles.black(S)),h=s,c=" ",p=u(c);if(e.blink&&e.blink.off===!0&&(u=S=>S,p=""),n&&i===0&&r===""&&s==="")return u(c);if(n&&i===0&&(s===r||s===""))return u(r[0])+o(r.slice(1));r=rs.isPrimitive(r)?`${r}`:"",s=rs.isPrimitive(s)?`${s}`:"";let f=r&&r.startsWith(s)&&r!==s,b=f?u(r[s.length]):p;if(i!==s.length&&n===!0&&(h=s.slice(0,i)+u(s[i])+s.slice(i+1),b=""),n===!1&&(b=""),f){let S=e.styles.unstyle(h+b);return h+b+o(r.slice(S.length))}return h+b}});var ue=y((rp,bi)=>{"use strict";var gu=ft(),yu=pt(),bu=is(),ns=class extends yu{constructor(t){super({...t,multiple:!0}),this.type="form",this.initial=this.options.initial,this.align=[this.options.align,"right"].find(s=>s!=null),this.emptyError="",this.values={}}async reset(t){return await super.reset(),t===!0&&(this._index=this.index),this.index=this._index,this.values={},this.choices.forEach(s=>s.reset&&s.reset()),this.render()}dispatch(t){return!!t&&this.append(t)}append(t){let s=this.focused;if(!s)return this.alert();let{cursor:r,input:i}=s;return s.value=s.input=i.slice(0,r)+t+i.slice(r),s.cursor++,this.render()}delete(){let t=this.focused;if(!t||t.cursor<=0)return this.alert();let{cursor:s,input:r}=t;return t.value=t.input=r.slice(0,s-1)+r.slice(s),t.cursor--,this.render()}deleteForward(){let t=this.focused;if(!t)return this.alert();let{cursor:s,input:r}=t;if(r[s]===void 0)return this.alert();let i=`${r}`.slice(0,s)+`${r}`.slice(s+1);return t.value=t.input=i,this.render()}right(){let t=this.focused;return t?t.cursor>=t.input.length?this.alert():(t.cursor++,this.render()):this.alert()}left(){let t=this.focused;return t?t.cursor<=0?this.alert():(t.cursor--,this.render()):this.alert()}space(t,s){return this.dispatch(t,s)}number(t,s){return this.dispatch(t,s)}next(){let t=this.focused;if(!t)return this.alert();let{initial:s,input:r}=t;return s&&s.startsWith(r)&&r!==s?(t.value=t.input=s,t.cursor=t.value.length,this.render()):super.next()}prev(){let t=this.focused;return t?t.cursor===0?super.prev():(t.value=t.input="",t.cursor=0,this.render()):this.alert()}separator(){return""}format(t){return this.state.submitted?"":super.format(t)}pointer(){return""}indicator(t){return t.input?"\u29BF":"\u2299"}async choiceSeparator(t,s){let r=await this.resolve(t.separator,this.state,t,s)||":";return r?" "+this.styles.disabled(r):""}async renderChoice(t,s){await this.onChoice(t,s);let{state:r,styles:i}=this,{cursor:n,initial:a="",name:o,input:l=""}=t,{muted:u,submitted:h,primary:c,danger:p}=i,f=this.index===s,b=t.validate||(()=>!0),S=await this.choiceSeparator(t,s),O=t.message;this.align==="right"&&(O=O.padStart(this.longest+1," ")),this.align==="left"&&(O=O.padEnd(this.longest+1," "));let w=this.values[o]=l||a,C=l?"success":"dark";await b.call(t,w,this.state)!==!0&&(C="danger");let _=i[C],E=_(await this.indicator(t,s))+(t.pad||""),B=this.indent(t),I=()=>[B,E,O+S,l].filter(Boolean).join(" ");if(r.submitted)return O=gu(O),l=h(l),I();if(t.format)l=await t.format.call(this,l,t,s);else{let Et=this.styles.muted;l=bu(this,{input:l,initial:a,pos:n,showCursor:f,color:Et})}return this.isValue(l)||(l=this.styles.muted(this.symbols.ellipsis)),t.result&&(this.values[o]=await t.result.call(this,w,t,s)),f&&(O=c(O)),t.error?l+=(l?" ":"")+p(t.error.trim()):t.hint&&(l+=(l?" ":"")+u(t.hint.trim())),I()}async submit(){return this.value=this.values,super.base.submit.call(this)}};bi.exports=ns});var as=y((ip,vi)=>{"use strict";var wu=ue(),vu=()=>{throw new Error("expected prompt to have a custom authenticate method")},wi=(e=vu)=>{class t extends wu{constructor(r){super(r)}async submit(){this.value=await e.call(this,this.values,this.state),super.base.submit.call(this)}static create(r){return wi(r)}}return t};vi.exports=wi()});var xi=y((np,_i)=>{"use strict";var ku=as();function _u(e,t){return e.username===this.options.username&&e.password===this.options.password}var ki=(e=_u)=>{let t=[{name:"username",message:"username"},{name:"password",message:"password",format(r){return this.options.showPassword?r:(this.state.submitted?this.styles.primary:this.styles.muted)(this.symbols.asterisk.repeat(r.length))}}];class s extends ku.create(e){constructor(i){super({...i,choices:t})}static create(i){return ki(i)}}return s};_i.exports=ki()});var ce=y((ap,Ci)=>{"use strict";var xu=Pt(),{isPrimitive:Cu,hasColor:Tu}=z(),os=class extends xu{constructor(t){super(t),this.cursorHide()}async initialize(){let t=await this.resolve(this.initial,this.state);this.input=await this.cast(t),await super.initialize()}dispatch(t){return this.isValue(t)?(this.input=t,this.submit()):this.alert()}format(t){let{styles:s,state:r}=this;return r.submitted?s.success(t):s.primary(t)}cast(t){return this.isTrue(t)}isTrue(t){return/^[ty1]/i.test(t)}isFalse(t){return/^[fn0]/i.test(t)}isValue(t){return Cu(t)&&(this.isTrue(t)||this.isFalse(t))}async hint(){if(this.state.status==="pending"){let t=await this.element("hint");return Tu(t)?t:this.styles.muted(t)}}async render(){let{input:t,size:s}=this.state,r=await this.prefix(),i=await this.separator(),n=await this.message(),a=this.styles.muted(this.default),o=[r,n,a,i].filter(Boolean).join(" ");this.state.prompt=o;let l=await this.header(),u=this.value=this.cast(t),h=await this.format(u),c=await this.error()||await this.hint(),p=await this.footer();c&&!o.includes(c)&&(h+=" "+c),o+=" "+h,this.clear(s),this.write([l,o,p].filter(Boolean).join(`
`)),this.restore()}set value(t){super.value=t}get value(){return this.cast(super.value)}};Ci.exports=os});var Si=y((op,Ti)=>{"use strict";var Su=ce(),ls=class extends Su{constructor(t){super(t),this.default=this.options.default||(this.initial?"(Y/n)":"(y/N)")}};Ti.exports=ls});var Ri=y((lp,Oi)=>{"use strict";var Ou=pt(),Ru=ue(),Ft=Ru.prototype,us=class extends Ou{constructor(t){super({...t,multiple:!0}),this.align=[this.options.align,"left"].find(s=>s!=null),this.emptyError="",this.values={}}dispatch(t,s){let r=this.focused,i=r.parent||{};return!r.editable&&!i.editable&&(t==="a"||t==="i")?super[t]():Ft.dispatch.call(this,t,s)}append(t,s){return Ft.append.call(this,t,s)}delete(t,s){return Ft.delete.call(this,t,s)}space(t){return this.focused.editable?this.append(t):super.space()}number(t){return this.focused.editable?this.append(t):super.number(t)}next(){return this.focused.editable?Ft.next.call(this):super.next()}prev(){return this.focused.editable?Ft.prev.call(this):super.prev()}async indicator(t,s){let r=t.indicator||"",i=t.editable?r:super.indicator(t,s);return await this.resolve(i,this.state,t,s)||""}indent(t){return t.role==="heading"?"":t.editable?" ":"  "}async renderChoice(t,s){return t.indent="",t.editable?Ft.renderChoice.call(this,t,s):super.renderChoice(t,s)}error(){return""}footer(){return this.state.error}async validate(){let t=!0;for(let s of this.choices){if(typeof s.validate!="function"||s.role==="heading")continue;let r=s.parent?this.value[s.parent.name]:this.value;if(s.editable?r=s.value===s.name?s.initial||"":s.value:this.isDisabled(s)||(r=s.enabled===!0),t=await s.validate(r,this.state),t!==!0)break}return t!==!0&&(this.state.error=typeof t=="string"?t:"Invalid Input"),t}submit(){if(this.focused.newChoice===!0)return super.submit();if(this.choices.some(t=>t.newChoice))return this.alert();this.value={};for(let t of this.choices){let s=t.parent?this.value[t.parent.name]:this.value;if(t.role==="heading"){this.value[t.name]={};continue}t.editable?s[t.name]=t.value===t.name?t.initial||"":t.value:this.isDisabled(t)||(s[t.name]=t.enabled===!0)}return this.base.submit.call(this)}};Oi.exports=us});var xt=y((up,Ei)=>{"use strict";var Eu=Pt(),Au=Ne(),Pu=is(),{isPrimitive:Fu}=z(),cs=class extends Eu{constructor(t){super(t),this.initial=Fu(this.initial)?String(this.initial):"",this.initial&&this.cursorHide(),this.state.prevCursor=0,this.state.clipboard=[],this.keypressTimeout=this.options.keypressTimeout!==void 0?this.options.keypressTimeout:null}async keypress(t,s=t?Au(t,{}):{}){let r=Date.now(),i=r-this.lastKeypress;this.lastKeypress=r;let n=s.name==="return"||s.name==="enter",a=this.state.prevKeypress,o;if(this.state.prevKeypress=s,this.keypressTimeout!=null&&n){if(i<this.keypressTimeout)return this.submit();this.state.multilineBuffer=this.state.multilineBuffer||"",this.state.multilineBuffer+=t,o=!0,a=null}return(o||this.options.multiline&&n)&&(!a||a.name!=="return")?this.append(`
`,s):super.keypress(t,s)}moveCursor(t){this.cursor+=t}reset(){return this.input=this.value="",this.cursor=0,this.render()}dispatch(t,s){if(!t||s.ctrl||s.code)return this.alert();this.append(t)}append(t){let{cursor:s,input:r}=this.state;this.input=`${r}`.slice(0,s)+t+`${r}`.slice(s),this.moveCursor(String(t).length),this.render()}insert(t){this.append(t)}delete(){let{cursor:t,input:s}=this.state;if(t<=0)return this.alert();this.input=`${s}`.slice(0,t-1)+`${s}`.slice(t),this.moveCursor(-1),this.render()}deleteForward(){let{cursor:t,input:s}=this.state;if(s[t]===void 0)return this.alert();this.input=`${s}`.slice(0,t)+`${s}`.slice(t+1),this.render()}cutForward(){let t=this.cursor;if(this.input.length<=t)return this.alert();this.state.clipboard.push(this.input.slice(t)),this.input=this.input.slice(0,t),this.render()}cutLeft(){let t=this.cursor;if(t===0)return this.alert();let s=this.input.slice(0,t),r=this.input.slice(t),i=s.split(" ");this.state.clipboard.push(i.pop()),this.input=i.join(" "),this.cursor=this.input.length,this.input+=r,this.render()}paste(){if(!this.state.clipboard.length)return this.alert();this.insert(this.state.clipboard.pop()),this.render()}toggleCursor(){this.state.prevCursor?(this.cursor=this.state.prevCursor,this.state.prevCursor=0):(this.state.prevCursor=this.cursor,this.cursor=0),this.render()}first(){this.cursor=0,this.render()}last(){this.cursor=this.input.length-1,this.render()}next(){let t=this.initial!=null?String(this.initial):"";if(!t||!t.startsWith(this.input))return this.alert();this.input=this.initial,this.cursor=this.initial.length,this.render()}prev(){if(!this.input)return this.alert();this.reset()}backward(){return this.left()}forward(){return this.right()}right(){return this.cursor>=this.input.length?this.alert():(this.moveCursor(1),this.render())}left(){return this.cursor<=0?this.alert():(this.moveCursor(-1),this.render())}isValue(t){return!!t}async format(t=this.value){let s=await this.resolve(this.initial,this.state);return this.state.submitted?this.styles.submitted(t||s):Pu(this,{input:t,initial:s,pos:this.cursor})}async render(){let t=this.state.size,s=await this.prefix(),r=await this.separator(),i=await this.message(),n=[s,i,r].filter(Boolean).join(" ");this.state.prompt=n;let a=await this.header(),o=await this.format(),l=await this.error()||await this.hint(),u=await this.footer();l&&!o.includes(l)&&(o+=" "+l),n+=" "+o,this.clear(t),this.write([a,n,u].filter(Boolean).join(`
`)),this.restore()}};Ei.exports=cs});var Pi=y((cp,Ai)=>{"use strict";var ju=e=>e.filter((t,s)=>e.lastIndexOf(t)===s),he=e=>ju(e).filter(Boolean);Ai.exports=(e,t={},s="")=>{let{past:r=[],present:i=""}=t,n,a;switch(e){case"prev":case"undo":return n=r.slice(0,r.length-1),a=r[r.length-1]||"",{past:he([s,...n]),present:a};case"next":case"redo":return n=r.slice(1),a=r[0]||"",{past:he([...n,s]),present:a};case"save":return{past:he([...r,s]),present:""};case"remove":return a=he(r.filter(o=>o!==s)),i="",a.length&&(i=a.pop()),{past:a,present:i};default:throw new Error(`Invalid action: "${e}"`)}}});var fs=y((hp,ji)=>{"use strict";var qu=xt(),Fi=Pi(),hs=class extends qu{constructor(t){super(t);let s=this.options.history;if(s&&s.store){let r=s.values||this.initial;this.autosave=!!s.autosave,this.store=s.store,this.data=this.store.get("values")||{past:[],present:r},this.initial=this.data.present||this.data.past[this.data.past.length-1]}}completion(t){return this.store?(this.data=Fi(t,this.data,this.input),this.data.present?(this.input=this.data.present,this.cursor=this.input.length,this.render()):this.alert()):this.alert()}altUp(){return this.completion("prev")}altDown(){return this.completion("next")}prev(){return this.save(),super.prev()}save(){this.store&&(this.data=Fi("save",this.data,this.input),this.store.set("values",this.data))}submit(){return this.store&&this.autosave===!0&&this.save(),super.submit()}};ji.exports=hs});var $i=y((fp,qi)=>{"use strict";var $u=xt(),ds=class extends $u{format(){return""}};qi.exports=ds});var Ii=y((dp,Mi)=>{"use strict";var Mu=xt(),ps=class extends Mu{constructor(t={}){super(t),this.sep=this.options.separator||/, */,this.initial=t.initial||""}split(t=this.value){return t?String(t).split(this.sep):[]}format(){let t=this.state.submitted?this.styles.primary:s=>s;return this.list.map(t).join(", ")}async submit(t){let s=this.state.error||await this.validate(this.list,this.state);return s!==!0?(this.state.error=s,super.submit()):(this.value=this.list,super.submit())}get list(){return this.split()}};Mi.exports=ps});var Di=y((pp,Li)=>{"use strict";var Iu=pt(),ms=class extends Iu{constructor(t){super({...t,multiple:!0})}};Li.exports=ms});var ys=y((mp,Bi)=>{"use strict";var Lu=xt(),gs=class extends Lu{constructor(t={}){super({style:"number",...t}),this.min=this.isValue(t.min)?this.toNumber(t.min):-1/0,this.max=this.isValue(t.max)?this.toNumber(t.max):1/0,this.delay=t.delay!=null?t.delay:1e3,this.float=t.float!==!1,this.round=t.round===!0||t.float===!1,this.major=t.major||10,this.minor=t.minor||1,this.initial=t.initial!=null?t.initial:"",this.input=String(this.initial),this.cursor=this.input.length,this.cursorShow()}append(t){return!/[-+.]/.test(t)||t==="."&&this.input.includes(".")?this.alert("invalid number"):super.append(t)}number(t){return super.append(t)}next(){return this.input&&this.input!==this.initial?this.alert():this.isValue(this.initial)?(this.input=this.initial,this.cursor=String(this.initial).length,this.render()):this.alert()}up(t){let s=t||this.minor,r=this.toNumber(this.input);return r>this.max+s?this.alert():(this.input=`${r+s}`,this.render())}down(t){let s=t||this.minor,r=this.toNumber(this.input);return r<this.min-s?this.alert():(this.input=`${r-s}`,this.render())}shiftDown(){return this.down(this.major)}shiftUp(){return this.up(this.major)}format(t=this.input){return typeof this.options.format=="function"?this.options.format.call(this,t):this.styles.info(t)}toNumber(t=""){return this.float?+t:Math.round(+t)}isValue(t){return/^[-+]?[0-9]+((\.)|(\.[0-9]+))?$/.test(t)}submit(){let t=[this.input,this.initial].find(s=>this.isValue(s));return this.value=this.toNumber(t||0),super.submit()}};Bi.exports=gs});var Gi=y((gp,Ni)=>{Ni.exports=ys()});var Ui=y((yp,zi)=>{"use strict";var Du=xt(),bs=class extends Du{constructor(t){super(t),this.cursorShow()}format(t=this.input){return this.keypressed?(this.state.submitted?this.styles.primary:this.styles.muted)(this.symbols.asterisk.repeat(t.length)):""}};zi.exports=bs});var Vi=y((bp,Hi)=>{"use strict";var Bu=ft(),Nu=Ut(),Wi=z(),ws=class extends Nu{constructor(t={}){super(t),this.widths=[].concat(t.messageWidth||50),this.align=[].concat(t.align||"left"),this.linebreak=t.linebreak||!1,this.edgeLength=t.edgeLength||3,this.newline=t.newline||`
   `;let s=t.startNumber||1;typeof this.scale=="number"&&(this.scaleKey=!1,this.scale=Array(this.scale).fill(0).map((r,i)=>({name:i+s})))}async reset(){return this.tableized=!1,await super.reset(),this.render()}tableize(){if(this.tableized===!0)return;this.tableized=!0;let t=0;for(let s of this.choices){t=Math.max(t,s.message.length),s.scaleIndex=s.initial||2,s.scale=[];for(let r=0;r<this.scale.length;r++)s.scale.push({index:r})}this.widths[0]=Math.min(this.widths[0],t+3)}async dispatch(t,s){if(this.multiple)return this[s.name]?await this[s.name](t,s):await super.dispatch(t,s);this.alert()}heading(t,s,r){return this.styles.strong(t)}separator(){return this.styles.muted(this.symbols.ellipsis)}right(){let t=this.focused;return t.scaleIndex>=this.scale.length-1?this.alert():(t.scaleIndex++,this.render())}left(){let t=this.focused;return t.scaleIndex<=0?this.alert():(t.scaleIndex--,this.render())}indent(){return""}format(){return this.state.submitted?this.choices.map(s=>this.styles.info(s.index)).join(", "):""}pointer(){return""}renderScaleKey(){return this.scaleKey===!1||this.state.submitted?"":["",...this.scale.map(r=>`   ${r.name} - ${r.message}`)].map(r=>this.styles.muted(r)).join(`
`)}renderScaleHeading(t){let s=this.scale.map(l=>l.name);typeof this.options.renderScaleHeading=="function"&&(s=this.options.renderScaleHeading.call(this,t));let r=this.scaleLength-s.join("").length,i=Math.round(r/(s.length-1)),a=s.map(l=>this.styles.strong(l)).join(" ".repeat(i)),o=" ".repeat(this.widths[0]);return this.margin[3]+o+this.margin[1]+a}scaleIndicator(t,s,r){if(typeof this.options.scaleIndicator=="function")return this.options.scaleIndicator.call(this,t,s,r);let i=t.scaleIndex===s.index;return s.disabled?this.styles.hint(this.symbols.radio.disabled):i?this.styles.success(this.symbols.radio.on):this.symbols.radio.off}renderScale(t,s){let r=t.scale.map(n=>this.scaleIndicator(t,n,s)),i=this.term==="Hyper"?"":" ";return r.join(i+this.symbols.line.repeat(this.edgeLength))}async renderChoice(t,s){await this.onChoice(t,s);let r=this.index===s,i=await this.pointer(t,s),n=await t.hint;n&&!Wi.hasColor(n)&&(n=this.styles.muted(n));let a=b=>this.margin[3]+b.replace(/\s+$/,"").padEnd(this.widths[0]," "),o=this.newline,l=this.indent(t),u=await this.resolve(t.message,this.state,t,s),h=await this.renderScale(t,s),c=this.margin[1]+this.margin[3];this.scaleLength=Bu(h).length,this.widths[0]=Math.min(this.widths[0],this.width-this.scaleLength-c.length);let f=Wi.wordWrap(u,{width:this.widths[0],newline:o}).split(`
`).map(b=>a(b)+this.margin[1]);return r&&(h=this.styles.info(h),f=f.map(b=>this.styles.info(b))),f[0]+=h,this.linebreak&&f.push(""),[l+i,f.join(`
`)].filter(Boolean)}async renderChoices(){if(this.state.submitted)return"";this.tableize();let t=this.visible.map(async(i,n)=>await this.renderChoice(i,n)),s=await Promise.all(t),r=await this.renderScaleHeading();return this.margin[0]+[r,...s.map(i=>i.join(" "))].join(`
`)}async render(){let{submitted:t,size:s}=this.state,r=await this.prefix(),i=await this.separator(),n=await this.message(),a="";this.options.promptLine!==!1&&(a=[r,n,i,""].join(" "),this.state.prompt=a);let o=await this.header(),l=await this.format(),u=await this.renderScaleKey(),h=await this.error()||await this.hint(),c=await this.renderChoices(),p=await this.footer(),f=this.emptyError;l&&(a+=l),h&&!a.includes(h)&&(a+=" "+h),t&&!l&&!c.trim()&&this.multiple&&f!=null&&(a+=this.styles.danger(f)),this.clear(s),this.write([o,a,u,c,p].filter(Boolean).join(`
`)),this.state.submitted||this.write(this.margin[2]),this.restore()}submit(){this.value={};for(let t of this.choices)this.value[t.name]=t.scaleIndex;return this.base.submit.call(this)}};Hi.exports=ws});var Qi=y((wp,Yi)=>{"use strict";var Ki=ft(),Gu=(e="")=>typeof e=="string"?e.replace(/^['"]|['"]$/g,""):"",ks=class{constructor(t){this.name=t.key,this.field=t.field||{},this.value=Gu(t.initial||this.field.initial||""),this.message=t.message||this.name,this.cursor=0,this.input="",this.lines=[]}},zu=async(e={},t={},s=r=>r)=>{let r=new Set,i=e.fields||[],n=e.template,a=[],o=[],l=[],u=1;typeof n=="function"&&(n=await n());let h=-1,c=()=>n[++h],p=()=>n[h+1],f=b=>{b.line=u,a.push(b)};for(f({type:"bos",value:""});h<n.length-1;){let b=c();if(/^[^\S\n ]$/.test(b)){f({type:"text",value:b});continue}if(b===`
`){f({type:"newline",value:b}),u++;continue}if(b==="\\"){b+=c(),f({type:"text",value:b});continue}if((b==="$"||b==="#"||b==="{")&&p()==="{"){let O=c();b+=O;let w={type:"template",open:b,inner:"",close:"",value:b},C;for(;C=c();){if(C==="}"){p()==="}"&&(C+=c()),w.value+=C,w.close=C;break}C===":"?(w.initial="",w.key=w.inner):w.initial!==void 0&&(w.initial+=C),w.value+=C,w.inner+=C}w.template=w.open+(w.initial||w.inner)+w.close,w.key=w.key||w.inner,hasOwnProperty.call(t,w.key)&&(w.initial=t[w.key]),w=s(w),f(w),l.push(w.key),r.add(w.key);let _=o.find(E=>E.name===w.key);w.field=i.find(E=>E.name===w.key),_||(_=new ks(w),o.push(_)),_.lines.push(w.line-1);continue}let S=a[a.length-1];S.type==="text"&&S.line===u?S.value+=b:f({type:"text",value:b})}return f({type:"eos",value:""}),{input:n,tabstops:a,unique:r,keys:l,items:o}};Yi.exports=async e=>{let t=e.options,s=new Set(t.required===!0?[]:t.required||[]),r={...t.values,...t.initial},{tabstops:i,items:n,keys:a}=await zu(t,r),o=vs("result",e,t),l=vs("format",e,t),u=vs("validate",e,t,!0),h=e.isValue.bind(e);return async(c={},p=!1)=>{let f=0;c.required=s,c.items=n,c.keys=a,c.output="";let b=async(C,_,E,B)=>{let I=await u(C,_,E,B);return I===!1?"Invalid field "+E.name:I};for(let C of i){let _=C.value,E=C.key;if(C.type!=="template"){_&&(c.output+=_);continue}if(C.type==="template"){let B=n.find(ht=>ht.name===E);t.required===!0&&c.required.add(B.name);let I=[B.input,c.values[B.value],B.value,_].find(h),at=(B.field||{}).message||C.inner;if(p){let ht=await b(c.values[E],c,B,f);if(ht&&typeof ht=="string"||ht===!1){c.invalid.set(E,ht);continue}c.invalid.delete(E);let Ie=await o(c.values[E],c,B,f);c.output+=Ki(Ie);continue}B.placeholder=!1;let Nt=_;_=await l(_,c,B,f),I!==_?(c.values[E]=I,_=e.styles.typing(I),c.missing.delete(at)):(c.values[E]=void 0,I=`<${at}>`,_=e.styles.primary(I),B.placeholder=!0,c.required.has(E)&&c.missing.add(at)),c.missing.has(at)&&c.validating&&(_=e.styles.warning(I)),c.invalid.has(E)&&c.validating&&(_=e.styles.danger(I)),f===c.index&&(Nt!==_?_=e.styles.underline(_):_=e.styles.heading(Ki(_))),f++}_&&(c.output+=_)}let S=c.output.split(`
`).map(C=>" "+C),O=n.length,w=0;for(let C of n)c.invalid.has(C.name)&&C.lines.forEach(_=>{S[_][0]===" "&&(S[_]=c.styles.danger(c.symbols.bullet)+S[_].slice(1))}),e.isValue(c.values[C.name])&&w++;return c.completed=(w/O*100).toFixed(0),c.output=S.join(`
`),c.output}};function vs(e,t,s,r){return(i,n,a,o)=>typeof a.field[e]=="function"?a.field[e].call(t,i,n,a,o):[r,i].find(l=>t.isValue(l))}});var Ji=y((vp,Zi)=>{"use strict";var Uu=ft(),Wu=Qi(),Hu=Pt(),_s=class extends Hu{constructor(t){super(t),this.cursorHide(),this.reset(!0)}async initialize(){this.interpolate=await Wu(this),await super.initialize()}async reset(t){this.state.keys=[],this.state.invalid=new Map,this.state.missing=new Set,this.state.completed=0,this.state.values={},t!==!0&&(await this.initialize(),await this.render())}moveCursor(t){let s=this.getItem();this.cursor+=t,s.cursor+=t}dispatch(t,s){if(!s.code&&!s.ctrl&&t!=null&&this.getItem()){this.append(t,s);return}this.alert()}append(t,s){let r=this.getItem(),i=r.input.slice(0,this.cursor),n=r.input.slice(this.cursor);this.input=r.input=`${i}${t}${n}`,this.moveCursor(1),this.render()}delete(){let t=this.getItem();if(this.cursor<=0||!t.input)return this.alert();let s=t.input.slice(this.cursor),r=t.input.slice(0,this.cursor-1);this.input=t.input=`${r}${s}`,this.moveCursor(-1),this.render()}increment(t){return t>=this.state.keys.length-1?0:t+1}decrement(t){return t<=0?this.state.keys.length-1:t-1}first(){this.state.index=0,this.render()}last(){this.state.index=this.state.keys.length-1,this.render()}right(){if(this.cursor>=this.input.length)return this.alert();this.moveCursor(1),this.render()}left(){if(this.cursor<=0)return this.alert();this.moveCursor(-1),this.render()}prev(){this.state.index=this.decrement(this.state.index),this.getItem(),this.render()}next(){this.state.index=this.increment(this.state.index),this.getItem(),this.render()}up(){this.prev()}down(){this.next()}format(t){let s=this.state.completed<100?this.styles.warning:this.styles.success;return this.state.submitted===!0&&this.state.completed!==100&&(s=this.styles.danger),s(`${this.state.completed}% completed`)}async render(){let{index:t,keys:s=[],submitted:r,size:i}=this.state,n=[this.options.newline,`
`].find(C=>C!=null),a=await this.prefix(),o=await this.separator(),l=await this.message(),u=[a,l,o].filter(Boolean).join(" ");this.state.prompt=u;let h=await this.header(),c=await this.error()||"",p=await this.hint()||"",f=r?"":await this.interpolate(this.state),b=this.state.key=s[t]||"",S=await this.format(b),O=await this.footer();S&&(u+=" "+S),p&&!S&&this.state.completed===0&&(u+=" "+p),this.clear(i);let w=[h,u,f,O,c.trim()];this.write(w.filter(Boolean).join(n)),this.restore()}getItem(t){let{items:s,keys:r,index:i}=this.state,n=s.find(a=>a.name===r[i]);return n&&n.input!=null&&(this.input=n.input,this.cursor=n.cursor),n}async submit(){typeof this.interpolate!="function"&&await this.initialize(),await this.interpolate(this.state,!0);let{invalid:t,missing:s,output:r,values:i}=this.state;if(t.size){let o="";for(let[l,u]of t)o+=`Invalid ${l}: ${u}
`;return this.state.error=o,super.submit()}if(s.size)return this.state.error="Required: "+[...s.keys()].join(", "),super.submit();let a=Uu(r).split(`
`).map(o=>o.slice(1)).join(`
`);return this.value={values:i,result:a},super.submit()}};Zi.exports=_s});var tn=y((kp,Xi)=>{"use strict";var Vu="(Use <shift>+<up/down> to sort)",Ku=pt(),xs=class extends Ku{constructor(t){super({...t,reorder:!1,sort:!0,multiple:!0}),this.state.hint=[this.options.hint,Vu].find(this.isValue.bind(this))}indicator(){return""}async renderChoice(t,s){let r=await super.renderChoice(t,s),i=this.symbols.identicalTo+" ",n=this.index===s&&this.sorting?this.styles.muted(i):"  ";return this.options.drag===!1&&(n=""),this.options.numbered===!0?n+`${s+1} - `+r:n+r}get selected(){return this.choices}submit(){return this.value=this.choices.map(t=>t.value),super.submit()}};Xi.exports=xs});var sn=y((_p,en)=>{"use strict";var Yu=Ut(),Cs=class extends Yu{constructor(t={}){if(super(t),this.emptyError=t.emptyError||"No items were selected",this.term=process.env.TERM_PROGRAM,!this.options.header){let s=["","4 - Strongly Agree","3 - Agree","2 - Neutral","1 - Disagree","0 - Strongly Disagree",""];s=s.map(r=>this.styles.muted(r)),this.state.header=s.join(`
   `)}}async toChoices(...t){if(this.createdScales)return!1;this.createdScales=!0;let s=await super.toChoices(...t);for(let r of s)r.scale=Qu(5,this.options),r.scaleIdx=2;return s}dispatch(){this.alert()}space(){let t=this.focused,s=t.scale[t.scaleIdx],r=s.selected;return t.scale.forEach(i=>i.selected=!1),s.selected=!r,this.render()}indicator(){return""}pointer(){return""}separator(){return this.styles.muted(this.symbols.ellipsis)}right(){let t=this.focused;return t.scaleIdx>=t.scale.length-1?this.alert():(t.scaleIdx++,this.render())}left(){let t=this.focused;return t.scaleIdx<=0?this.alert():(t.scaleIdx--,this.render())}indent(){return"   "}async renderChoice(t,s){await this.onChoice(t,s);let r=this.index===s,i=this.term==="Hyper",n=i?9:8,a=i?"":" ",o=this.symbols.line.repeat(n),l=" ".repeat(n+(i?0:1)),u=_=>(_?this.styles.success("\u25C9"):"\u25EF")+a,h=s+1+".",c=r?this.styles.heading:this.styles.noop,p=await this.resolve(t.message,this.state,t,s),f=this.indent(t),b=f+t.scale.map((_,E)=>u(E===t.scaleIdx)).join(o),S=_=>_===t.scaleIdx?c(_):_,O=f+t.scale.map((_,E)=>S(E)).join(l),w=()=>[h,p].filter(Boolean).join(" "),C=()=>[w(),b,O," "].filter(Boolean).join(`
`);return r&&(b=this.styles.cyan(b),O=this.styles.cyan(O)),C()}async renderChoices(){if(this.state.submitted)return"";let t=this.visible.map(async(r,i)=>await this.renderChoice(r,i)),s=await Promise.all(t);return s.length||s.push(this.styles.danger("No matching choices")),s.join(`
`)}format(){return this.state.submitted?this.choices.map(s=>this.styles.info(s.scaleIdx)).join(", "):""}async render(){let{submitted:t,size:s}=this.state,r=await this.prefix(),i=await this.separator(),n=await this.message(),a=[r,n,i].filter(Boolean).join(" ");this.state.prompt=a;let o=await this.header(),l=await this.format(),u=await this.error()||await this.hint(),h=await this.renderChoices(),c=await this.footer();(l||!u)&&(a+=" "+l),u&&!a.includes(u)&&(a+=" "+u),t&&!l&&!h&&this.multiple&&this.type!=="form"&&(a+=this.styles.danger(this.emptyError)),this.clear(s),this.write([a,o,h,c].filter(Boolean).join(`
`)),this.restore()}submit(){this.value={};for(let t of this.choices)this.value[t.name]=t.scaleIdx;return this.base.submit.call(this)}};function Qu(e,t={}){if(Array.isArray(t.scale))return t.scale.map(r=>({...r}));let s=[];for(let r=1;r<e+1;r++)s.push({i:r,selected:!1});return s}en.exports=Cs});var nn=y((xp,rn)=>{rn.exports=fs()});var on=y((Cp,an)=>{"use strict";var Zu=ce(),Ts=class extends Zu{async initialize(){await super.initialize(),this.value=this.initial=this.resolve(this.options.initial),this.disabled=this.options.disabled||"no",this.enabled=this.options.enabled||"yes",await this.render()}reset(){this.value=this.initial,this.render()}delete(){this.alert()}toggle(){this.value=!this.value,this.render()}enable(){if(this.value===!0)return this.alert();this.value=!0,this.render()}disable(){if(this.value===!1)return this.alert();this.value=!1,this.render()}up(){this.toggle()}down(){this.toggle()}right(){this.toggle()}left(){this.toggle()}next(){this.toggle()}prev(){this.toggle()}dispatch(t="",s){switch(t.toLowerCase()){case" ":return this.toggle();case"1":case"y":case"t":return this.enable();case"0":case"n":case"f":return this.disable();default:return this.alert()}}format(){let t=r=>this.styles.primary.underline(r);return[this.value?this.disabled:t(this.disabled),this.value?t(this.enabled):this.enabled].join(this.styles.muted(" / "))}async render(){let{size:t}=this.state,s=await this.header(),r=await this.prefix(),i=await this.separator(),n=await this.message(),a=await this.format(),o=await this.error()||await this.hint(),l=await this.footer(),u=[r,n,i,a].join(" ");this.state.prompt=u,o&&!u.includes(o)&&(u+=" "+o),this.clear(t),this.write([s,u,l].filter(Boolean).join(`
`)),this.write(this.margin[2]),this.restore()}};an.exports=Ts});var un=y((Tp,ln)=>{"use strict";var Ju=pt(),Ss=class extends Ju{constructor(t){if(super(t),typeof this.options.correctChoice!="number"||this.options.correctChoice<0)throw new Error("Please specify the index of the correct answer from the list of choices")}async toChoices(t,s){let r=await super.toChoices(t,s);if(r.length<2)throw new Error("Please give at least two choices to the user");if(this.options.correctChoice>r.length)throw new Error("Please specify the index of the correct answer from the list of choices");return r}check(t){return t.index===this.options.correctChoice}async result(t){return{selectedAnswer:t,correctAnswer:this.options.choices[this.options.correctChoice].value,correct:await this.check(this.state)}}};ln.exports=Ss});var hn=y(Os=>{"use strict";var cn=z(),L=(e,t)=>{cn.defineExport(Os,e,t),cn.defineExport(Os,e.toLowerCase(),t)};L("AutoComplete",()=>gi());L("BasicAuth",()=>xi());L("Confirm",()=>Si());L("Editable",()=>Ri());L("Form",()=>ue());L("Input",()=>fs());L("Invisible",()=>$i());L("List",()=>Ii());L("MultiSelect",()=>Di());L("Numeral",()=>Gi());L("Password",()=>Ui());L("Scale",()=>Vi());L("Select",()=>pt());L("Snippet",()=>Ji());L("Sort",()=>tn());L("Survey",()=>sn());L("Text",()=>nn());L("Toggle",()=>on());L("Quiz",()=>un())});var dn=y((Op,fn)=>{fn.exports={ArrayPrompt:Ut(),AuthPrompt:as(),BooleanPrompt:ce(),NumberPrompt:ys(),StringPrompt:xt()}});var gn=y((Rp,mn)=>{"use strict";var pn=require("assert"),Es=require("events"),mt=z(),nt=class extends Es{constructor(t,s){super(),this.options=mt.merge({},t),this.answers={...s}}register(t,s){if(mt.isObject(t)){for(let i of Object.keys(t))this.register(i,t[i]);return this}pn.equal(typeof s,"function","expected a function");let r=t.toLowerCase();return s.prototype instanceof this.Prompt?this.prompts[r]=s:this.prompts[r]=s(this.Prompt,this),this}async prompt(t=[]){for(let s of[].concat(t))try{typeof s=="function"&&(s=await s.call(this)),await this.ask(mt.merge({},this.options,s))}catch(r){return Promise.reject(r)}return this.answers}async ask(t){typeof t=="function"&&(t=await t.call(this));let s=mt.merge({},this.options,t),{type:r,name:i}=t,{set:n,get:a}=mt;if(typeof r=="function"&&(r=await r.call(this,t,this.answers)),!r)return this.answers[i];r==="number"&&(r="numeral"),pn(this.prompts[r],`Prompt "${r}" is not registered`);let o=new this.prompts[r](s),l=a(this.answers,i);o.state.answers=this.answers,o.enquirer=this,i&&o.on("submit",h=>{this.emit("answer",i,h,o),n(this.answers,i,h)});let u=o.emit.bind(o);return o.emit=(...h)=>(this.emit.call(this,...h),u(...h)),this.emit("prompt",o,this),s.autofill&&l!=null?(o.value=o.input=l,s.autofill==="show"&&await o.submit()):l=o.value=await o.run(),l}use(t){return t.call(this,this),this}set Prompt(t){this._Prompt=t}get Prompt(){return this._Prompt||this.constructor.Prompt}get prompts(){return this.constructor.prompts}static set Prompt(t){this._Prompt=t}static get Prompt(){return this._Prompt||Pt()}static get prompts(){return hn()}static get types(){return dn()}static get prompt(){let t=(s,...r)=>{let i=new this(...r),n=i.emit.bind(i);return i.emit=(...a)=>(t.emit(...a),n(...a)),i.prompt(s)};return mt.mixinEmitter(t,new Es),t}};mt.mixinEmitter(nt,new Es);var Rs=nt.prompts;for(let e of Object.keys(Rs)){let t=e.toLowerCase(),s=r=>new Rs[e](r).run();nt.prompt[t]=s,nt[t]=s,nt[e]||Reflect.defineProperty(nt,e,{get:()=>Rs[e]})}var Wt=e=>{mt.defineExport(nt,e,()=>nt.types[e])};Wt("ArrayPrompt");Wt("AuthPrompt");Wt("BooleanPrompt");Wt("NumberPrompt");Wt("StringPrompt");mn.exports=nt});var bn=y((Ep,yn)=>{var jt=1e3,qt=jt*60,$t=qt*60,Ct=$t*24,Xu=Ct*7,tc=Ct*365.25;yn.exports=function(e,t){t=t||{};var s=typeof e;if(s==="string"&&e.length>0)return ec(e);if(s==="number"&&isFinite(e))return t.long?rc(e):sc(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function ec(e){if(e=String(e),!(e.length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var s=parseFloat(t[1]),r=(t[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return s*tc;case"weeks":case"week":case"w":return s*Xu;case"days":case"day":case"d":return s*Ct;case"hours":case"hour":case"hrs":case"hr":case"h":return s*$t;case"minutes":case"minute":case"mins":case"min":case"m":return s*qt;case"seconds":case"second":case"secs":case"sec":case"s":return s*jt;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}}}function sc(e){var t=Math.abs(e);return t>=Ct?Math.round(e/Ct)+"d":t>=$t?Math.round(e/$t)+"h":t>=qt?Math.round(e/qt)+"m":t>=jt?Math.round(e/jt)+"s":e+"ms"}function rc(e){var t=Math.abs(e);return t>=Ct?fe(e,t,Ct,"day"):t>=$t?fe(e,t,$t,"hour"):t>=qt?fe(e,t,qt,"minute"):t>=jt?fe(e,t,jt,"second"):e+" ms"}function fe(e,t,s,r){var i=t>=s*1.5;return Math.round(e/s)+" "+r+(i?"s":"")}});var As=y((Ap,wn)=>{function ic(e){s.debug=s,s.default=s,s.coerce=l,s.disable=n,s.enable=i,s.enabled=a,s.humanize=bn(),s.destroy=u,Object.keys(e).forEach(h=>{s[h]=e[h]}),s.names=[],s.skips=[],s.formatters={};function t(h){let c=0;for(let p=0;p<h.length;p++)c=(c<<5)-c+h.charCodeAt(p),c|=0;return s.colors[Math.abs(c)%s.colors.length]}s.selectColor=t;function s(h){let c,p=null,f,b;function S(...O){if(!S.enabled)return;let w=S,C=Number(new Date),_=C-(c||C);w.diff=_,w.prev=c,w.curr=C,c=C,O[0]=s.coerce(O[0]),typeof O[0]!="string"&&O.unshift("%O");let E=0;O[0]=O[0].replace(/%([a-zA-Z%])/g,(I,Et)=>{if(I==="%%")return"%";E++;let at=s.formatters[Et];if(typeof at=="function"){let Nt=O[E];I=at.call(w,Nt),O.splice(E,1),E--}return I}),s.formatArgs.call(w,O),(w.log||s.log).apply(w,O)}return S.namespace=h,S.useColors=s.useColors(),S.color=s.selectColor(h),S.extend=r,S.destroy=s.destroy,Object.defineProperty(S,"enabled",{enumerable:!0,configurable:!1,get:()=>p!==null?p:(f!==s.namespaces&&(f=s.namespaces,b=s.enabled(h)),b),set:O=>{p=O}}),typeof s.init=="function"&&s.init(S),S}function r(h,c){let p=s(this.namespace+(typeof c>"u"?":":c)+h);return p.log=this.log,p}function i(h){s.save(h),s.namespaces=h,s.names=[],s.skips=[];let c,p=(typeof h=="string"?h:"").split(/[\s,]+/),f=p.length;for(c=0;c<f;c++)p[c]&&(h=p[c].replace(/\*/g,".*?"),h[0]==="-"?s.skips.push(new RegExp("^"+h.slice(1)+"$")):s.names.push(new RegExp("^"+h+"$")))}function n(){let h=[...s.names.map(o),...s.skips.map(o).map(c=>"-"+c)].join(",");return s.enable(""),h}function a(h){if(h[h.length-1]==="*")return!0;let c,p;for(c=0,p=s.skips.length;c<p;c++)if(s.skips[c].test(h))return!1;for(c=0,p=s.names.length;c<p;c++)if(s.names[c].test(h))return!0;return!1}function o(h){return h.toString().substring(2,h.toString().length-2).replace(/\.\*\?$/,"*")}function l(h){return h instanceof Error?h.stack||h.message:h}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return s.enable(s.load()),s}wn.exports=ic});var vn=y((Q,de)=>{Q.formatArgs=ac;Q.save=oc;Q.load=lc;Q.useColors=nc;Q.storage=uc();Q.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();Q.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function nc(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function ac(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+de.exports.humanize(this.diff),!this.useColors)return;let t="color: "+this.color;e.splice(1,0,t,"color: inherit");let s=0,r=0;e[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(s++,i==="%c"&&(r=s))}),e.splice(r,0,t)}Q.log=console.debug||console.log||(()=>{});function oc(e){try{e?Q.storage.setItem("debug",e):Q.storage.removeItem("debug")}catch{}}function lc(){let e;try{e=Q.storage.getItem("debug")}catch{}return!e&&typeof process<"u"&&"env"in process&&(e=process.env.DEBUG),e}function uc(){try{return localStorage}catch{}}de.exports=As()(Q);var{formatters:cc}=de.exports;cc.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}});var _n=y((Pp,kn)=>{"use strict";kn.exports=(e,t=process.argv)=>{let s=e.startsWith("-")?"":e.length===1?"-":"--",r=t.indexOf(s+e),i=t.indexOf("--");return r!==-1&&(i===-1||r<i)}});var Tn=y((Fp,Cn)=>{"use strict";var hc=require("os"),xn=require("tty"),et=_n(),{env:D}=process,gt;et("no-color")||et("no-colors")||et("color=false")||et("color=never")?gt=0:(et("color")||et("colors")||et("color=true")||et("color=always"))&&(gt=1);"FORCE_COLOR"in D&&(D.FORCE_COLOR==="true"?gt=1:D.FORCE_COLOR==="false"?gt=0:gt=D.FORCE_COLOR.length===0?1:Math.min(parseInt(D.FORCE_COLOR,10),3));function Ps(e){return e===0?!1:{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}function Fs(e,t){if(gt===0)return 0;if(et("color=16m")||et("color=full")||et("color=truecolor"))return 3;if(et("color=256"))return 2;if(e&&!t&&gt===void 0)return 0;let s=gt||0;if(D.TERM==="dumb")return s;if(process.platform==="win32"){let r=hc.release().split(".");return Number(r[0])>=10&&Number(r[2])>=10586?Number(r[2])>=14931?3:2:1}if("CI"in D)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(r=>r in D)||D.CI_NAME==="codeship"?1:s;if("TEAMCITY_VERSION"in D)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(D.TEAMCITY_VERSION)?1:0;if(D.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in D){let r=parseInt((D.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(D.TERM_PROGRAM){case"iTerm.app":return r>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(D.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(D.TERM)||"COLORTERM"in D?1:s}function fc(e){let t=Fs(e,e&&e.isTTY);return Ps(t)}Cn.exports={supportsColor:fc,stdout:Ps(Fs(!0,xn.isatty(1))),stderr:Ps(Fs(!0,xn.isatty(2)))}});var On=y((G,me)=>{var dc=require("tty"),pe=require("util");G.init=vc;G.log=yc;G.formatArgs=mc;G.save=bc;G.load=wc;G.useColors=pc;G.destroy=pe.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");G.colors=[6,2,3,4,5,1];try{let e=Tn();e&&(e.stderr||e).level>=2&&(G.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}G.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,t)=>{let s=t.substring(6).toLowerCase().replace(/_([a-z])/g,(i,n)=>n.toUpperCase()),r=process.env[t];return/^(yes|on|true|enabled)$/i.test(r)?r=!0:/^(no|off|false|disabled)$/i.test(r)?r=!1:r==="null"?r=null:r=Number(r),e[s]=r,e},{});function pc(){return"colors"in G.inspectOpts?!!G.inspectOpts.colors:dc.isatty(process.stderr.fd)}function mc(e){let{namespace:t,useColors:s}=this;if(s){let r=this.color,i="\x1B[3"+(r<8?r:"8;5;"+r),n=`  ${i};1m${t} \x1B[0m`;e[0]=n+e[0].split(`
`).join(`
`+n),e.push(i+"m+"+me.exports.humanize(this.diff)+"\x1B[0m")}else e[0]=gc()+t+" "+e[0]}function gc(){return G.inspectOpts.hideDate?"":new Date().toISOString()+" "}function yc(...e){return process.stderr.write(pe.format(...e)+`
`)}function bc(e){e?process.env.DEBUG=e:delete process.env.DEBUG}function wc(){return process.env.DEBUG}function vc(e){e.inspectOpts={};let t=Object.keys(G.inspectOpts);for(let s=0;s<t.length;s++)e.inspectOpts[t[s]]=G.inspectOpts[t[s]]}me.exports=As()(G);var{formatters:Sn}=me.exports;Sn.o=function(e){return this.inspectOpts.colors=this.useColors,pe.inspect(e,this.inspectOpts).split(`
`).map(t=>t.trim()).join(" ")};Sn.O=function(e){return this.inspectOpts.colors=this.useColors,pe.inspect(e,this.inspectOpts)}});var qs=y((jp,js)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?js.exports=vn():js.exports=On()});var Rn=y(Z=>{"use strict";var kc=Z&&Z.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Z,"__esModule",{value:!0});var _c=require("fs"),xc=kc(qs()),Mt=xc.default("@kwsites/file-exists");function Cc(e,t,s){Mt("checking %s",e);try{let r=_c.statSync(e);return r.isFile()&&t?(Mt("[OK] path represents a file"),!0):r.isDirectory()&&s?(Mt("[OK] path represents a directory"),!0):(Mt("[FAIL] path represents something other than a file or directory"),!1)}catch(r){if(r.code==="ENOENT")return Mt("[FAIL] path is not accessible: %o",r),!1;throw Mt("[FATAL] %o",r),r}}function Tc(e,t=Z.READABLE){return Cc(e,(t&Z.FILE)>0,(t&Z.FOLDER)>0)}Z.exists=Tc;Z.FILE=1;Z.FOLDER=2;Z.READABLE=Z.FILE+Z.FOLDER});var En=y(ge=>{"use strict";function Sc(e){for(var t in e)ge.hasOwnProperty(t)||(ge[t]=e[t])}Object.defineProperty(ge,"__esModule",{value:!0});Sc(Rn())});var Ms=y(Tt=>{"use strict";Object.defineProperty(Tt,"__esModule",{value:!0});Tt.createDeferred=Tt.deferred=void 0;function $s(){let e,t,s="pending";return{promise:new Promise((i,n)=>{e=i,t=n}),done(i){s==="pending"&&(s="resolved",e(i))},fail(i){s==="pending"&&(s="rejected",t(i))},get fulfilled(){return s!=="pending"},get status(){return s}}}Tt.deferred=$s;Tt.createDeferred=$s;Tt.default=$s});var al=vt(gn()),Tr=vt(require("path")),Cr=vt(require("fs"));var Ee=vt(En(),1),Te=vt(qs(),1),Qa=require("child_process"),jo=vt(Ms(),1),Lt=vt(Ms(),1),Oe=Object.defineProperty,Oc=Object.defineProperties,Rc=Object.getOwnPropertyDescriptor,Ec=Object.getOwnPropertyDescriptors,tr=Object.getOwnPropertyNames,An=Object.getOwnPropertySymbols,oa=Object.prototype.hasOwnProperty,Ac=Object.prototype.propertyIsEnumerable,Pn=(e,t,s)=>t in e?Oe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,st=(e,t)=>{for(var s in t||(t={}))oa.call(t,s)&&Pn(e,s,t[s]);if(An)for(var s of An(t))Ac.call(t,s)&&Pn(e,s,t[s]);return e},Kt=(e,t)=>Oc(e,Ec(t)),Pc=e=>Oe(e,"__esModule",{value:!0}),m=(e,t)=>function(){return e&&(t=(0,e[tr(e)[0]])(e=0)),t},Fc=(e,t)=>function(){return t||(0,e[tr(e)[0]])((t={exports:{}}).exports,t),t.exports},M=(e,t)=>{for(var s in t)Oe(e,s,{get:t[s],enumerable:!0})},jc=(e,t,s,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of tr(t))!oa.call(e,i)&&(s||i!=="default")&&Oe(e,i,{get:()=>t[i],enumerable:!(r=Rc(t,i))||r.enumerable});return e},j=(e=>(t,s)=>e&&e.get(t)||(s=jc(Pc({}),t,1),e&&e.set(t,s),s))(typeof WeakMap<"u"?new WeakMap:0),Vt=(e,t,s)=>new Promise((r,i)=>{var n=l=>{try{o(s.next(l))}catch(u){i(u)}},a=l=>{try{o(s.throw(l))}catch(u){i(u)}},o=l=>l.done?r(l.value):Promise.resolve(l.value).then(n,a);o((s=s.apply(e,t)).next())});function qc(...e){let t=new String(e);return Re.set(t,e),t}function xe(e){return e instanceof String&&Re.has(e)}function Fn(e){return Re.get(e)||[]}var Re,Jt=m({"src/lib/args/pathspec.ts"(){Re=new WeakMap}}),ct,wt=m({"src/lib/errors/git-error.ts"(){ct=class extends Error{constructor(e,t){super(t),this.task=e,Object.setPrototypeOf(this,new.target.prototype)}}}}),Xt,Bt=m({"src/lib/errors/git-response-error.ts"(){wt(),Xt=class extends ct{constructor(e,t){super(void 0,t||String(e)),this.git=e}}}}),la,ua=m({"src/lib/errors/task-configuration-error.ts"(){wt(),la=class extends ct{constructor(e){super(void 0,e)}}}});function ca(e){return typeof e=="function"?e:Rt}function ha(e){return typeof e=="function"&&e!==Rt}function fa(e,t){let s=e.indexOf(t);return s<=0?[e,""]:[e.substr(0,s),e.substr(s+1)]}function da(e,t=0){return pa(e)&&e.length>t?e[t]:void 0}function Ot(e,t=0){if(pa(e)&&e.length>t)return e[e.length-1-t]}function pa(e){return!!(e&&typeof e.length=="number")}function te(e="",t=!0,s=`
`){return e.split(s).reduce((r,i)=>{let n=t?i.trim():i;return n&&r.push(n),r},[])}function er(e,t){return te(e,!0).map(s=>t(s))}function sr(e){return(0,Ee.exists)(e,Ee.FOLDER)}function R(e,t){return Array.isArray(e)?e.includes(t)||e.push(t):e.add(t),t}function ma(e,t){return Array.isArray(e)&&!e.includes(t)&&e.push(t),e}function Ae(e,t){if(Array.isArray(e)){let s=e.indexOf(t);s>=0&&e.splice(s,1)}else e.delete(t);return t}function bt(e){return Array.isArray(e)?e:[e]}function ga(e){return bt(e).map(String)}function P(e,t=0){if(e==null)return t;let s=parseInt(e,10);return isNaN(s)?t:s}function Yt(e,t){let s=[];for(let r=0,i=e.length;r<i;r++)s.push(t,e[r]);return s}function Qt(e){return(Array.isArray(e)?Buffer.concat(e):e).toString("utf-8")}function ya(e,t){return Object.assign({},...t.map(s=>s in e?{[s]:e[s]}:{}))}function Gs(e=0){return new Promise(t=>setTimeout(t,e))}var Dt,Rt,ee,Pe=m({"src/lib/utils/util.ts"(){Dt="\0",Rt=()=>{},ee=Object.prototype.toString.call.bind(Object.prototype.toString)}});function lt(e,t,s){return t(e)?e:arguments.length>2?s:void 0}function rr(e,t){let s=xe(e)?"string":typeof e;return/number|string|boolean/.test(s)&&(!t||!t.includes(s))}function ir(e){return!!e&&ee(e)==="[object Object]"}function ba(e){return typeof e=="function"}var se,U,wa,Ce,nr,va=m({"src/lib/utils/argument-filters.ts"(){Pe(),Jt(),se=e=>Array.isArray(e),U=e=>typeof e=="string",wa=e=>Array.isArray(e)&&e.every(U),Ce=e=>U(e)||Array.isArray(e)&&e.every(U),nr=e=>e==null||"number|boolean|function".includes(typeof e)?!1:Array.isArray(e)||typeof e=="string"||typeof e.length=="number"}}),zs,$c=m({"src/lib/utils/exit-codes.ts"(){zs=(e=>(e[e.SUCCESS=0]="SUCCESS",e[e.ERROR=1]="ERROR",e[e.NOT_FOUND=-2]="NOT_FOUND",e[e.UNCLEAN=128]="UNCLEAN",e))(zs||{})}}),Zt,Mc=m({"src/lib/utils/git-output-streams.ts"(){Zt=class{constructor(e,t){this.stdOut=e,this.stdErr=t}asStrings(){return new Zt(this.stdOut.toString("utf8"),this.stdErr.toString("utf8"))}}}}),x,yt,Ic=m({"src/lib/utils/line-parser.ts"(){x=class{constructor(e,t){this.matches=[],this.parse=(s,r)=>(this.resetMatches(),this._regExp.every((i,n)=>this.addMatch(i,n,s(n)))?this.useMatches(r,this.prepareMatches())!==!1:!1),this._regExp=Array.isArray(e)?e:[e],t&&(this.useMatches=t)}useMatches(e,t){throw new Error("LineParser:useMatches not implemented")}resetMatches(){this.matches.length=0}prepareMatches(){return this.matches}addMatch(e,t,s){let r=s&&e.exec(s);return r&&this.pushMatch(t,r),!!r}pushMatch(e,t){this.matches.push(...t.slice(1))}},yt=class extends x{addMatch(e,t,s){return/^remote:\s/.test(String(s))&&super.addMatch(e,t,s)}pushMatch(e,t){(e>0||t.length>1)&&super.pushMatch(e,t)}}}});function ka(...e){let t=process.cwd(),s=Object.assign(st({baseDir:t},_a),...e.filter(r=>typeof r=="object"&&r));return s.baseDir=s.baseDir||t,s.trimmed=s.trimmed===!0,s}var _a,Lc=m({"src/lib/utils/simple-git-options.ts"(){_a={binary:"git",maxConcurrentProcesses:5,config:[],trimmed:!1}}});function ar(e,t=[]){return ir(e)?Object.keys(e).reduce((s,r)=>{let i=e[r];return xe(i)?s.push(i):rr(i,["boolean"])?s.push(r+"="+i):s.push(r),s},t):t}function K(e,t=0,s=!1){let r=[];for(let i=0,n=t<0?e.length:t;i<n;i++)"string|number".includes(typeof e[i])&&r.push(String(e[i]));return ar(or(e),r),s||r.push(...Dc(e)),r}function Dc(e){let t=typeof Ot(e)=="function";return lt(Ot(e,t?1:0),se,[])}function or(e){let t=ba(Ot(e));return lt(Ot(e,t?1:0),ir)}function q(e,t=!0){let s=ca(Ot(e));return t||ha(s)?s:void 0}var Bc=m({"src/lib/utils/task-options.ts"(){va(),Pe(),Jt()}});function Us(e,t){return e(t.stdOut,t.stdErr)}function X(e,t,s,r=!0){return bt(s).forEach(i=>{for(let n=te(i,r),a=0,o=n.length;a<o;a++){let l=(u=0)=>{if(!(a+u>=o))return n[a+u]};t.some(({parse:u})=>u(l,e))}}),e}var Nc=m({"src/lib/utils/task-parser.ts"(){Pe()}}),xa={};M(xa,{ExitCodes:()=>zs,GitOutputStreams:()=>Zt,LineParser:()=>x,NOOP:()=>Rt,NULL:()=>Dt,RemoteLineParser:()=>yt,append:()=>R,appendTaskOptions:()=>ar,asArray:()=>bt,asFunction:()=>ca,asNumber:()=>P,asStringArray:()=>ga,bufferToString:()=>Qt,callTaskParser:()=>Us,createInstanceConfig:()=>ka,delay:()=>Gs,filterArray:()=>se,filterFunction:()=>ba,filterHasLength:()=>nr,filterPlainObject:()=>ir,filterPrimitives:()=>rr,filterString:()=>U,filterStringArray:()=>wa,filterStringOrStringArray:()=>Ce,filterType:()=>lt,first:()=>da,folderExists:()=>sr,forEachLineWithContent:()=>er,getTrailingOptions:()=>K,including:()=>ma,isUserFunction:()=>ha,last:()=>Ot,objectToString:()=>ee,parseStringResponse:()=>X,pick:()=>ya,prefixedArray:()=>Yt,remove:()=>Ae,splitOn:()=>fa,toLinesWithContent:()=>te,trailingFunctionArgument:()=>q,trailingOptionsArgument:()=>or});var k=m({"src/lib/utils/index.ts"(){va(),$c(),Mc(),Ic(),Lc(),Bc(),Nc(),Pe()}}),Ca={};M(Ca,{CheckRepoActions:()=>Ws,checkIsBareRepoTask:()=>Sa,checkIsRepoRootTask:()=>Ta,checkIsRepoTask:()=>Gc});function Gc(e){switch(e){case"bare":return Sa();case"root":return Ta()}return{commands:["rev-parse","--is-inside-work-tree"],format:"utf-8",onError:Fe,parser:lr}}function Ta(){return{commands:["rev-parse","--git-dir"],format:"utf-8",onError:Fe,parser(t){return/^\.(git)?$/.test(t.trim())}}}function Sa(){return{commands:["rev-parse","--is-bare-repository"],format:"utf-8",onError:Fe,parser:lr}}function zc(e){return/(Not a git repository|Kein Git-Repository)/i.test(String(e))}var Ws,Fe,lr,Oa=m({"src/lib/tasks/check-is-repo.ts"(){k(),Ws=(e=>(e.BARE="bare",e.IN_TREE="tree",e.IS_REPO_ROOT="root",e))(Ws||{}),Fe=({exitCode:e},t,s,r)=>{if(e===128&&zc(t))return s(Buffer.from("false"));r(t)},lr=e=>e.trim()==="true"}});function Uc(e,t){let s=new Ra(e),r=e?Aa:Ea;return te(t).forEach(i=>{let n=i.replace(r,"");s.paths.push(n),(Pa.test(n)?s.folders:s.files).push(n)}),s}var Ra,Ea,Aa,Pa,Wc=m({"src/lib/responses/CleanSummary.ts"(){k(),Ra=class{constructor(e){this.dryRun=e,this.paths=[],this.files=[],this.folders=[]}},Ea=/^[a-z]+\s*/i,Aa=/^[a-z]+\s+[a-z]+\s*/i,Pa=/\/$/}}),Hs={};M(Hs,{EMPTY_COMMANDS:()=>je,adhocExecTask:()=>Fa,configurationErrorTask:()=>Y,isBufferTask:()=>qa,isEmptyTask:()=>$a,straightThroughBufferTask:()=>ja,straightThroughStringTask:()=>H});function Fa(e){return{commands:je,format:"empty",parser:e}}function Y(e){return{commands:je,format:"empty",parser(){throw typeof e=="string"?new la(e):e}}}function H(e,t=!1){return{commands:e,format:"utf-8",parser(s){return t?String(s).trim():s}}}function ja(e){return{commands:e,format:"buffer",parser(t){return t}}}function qa(e){return e.format==="buffer"}function $a(e){return e.format==="empty"||!e.commands.length}var je,$=m({"src/lib/tasks/task.ts"(){ua(),je=[]}}),Ma={};M(Ma,{CONFIG_ERROR_INTERACTIVE_MODE:()=>ur,CONFIG_ERROR_MODE_REQUIRED:()=>cr,CONFIG_ERROR_UNKNOWN_OPTION:()=>hr,CleanOptions:()=>we,cleanTask:()=>Ia,cleanWithOptionsTask:()=>Hc,isCleanOptionsArray:()=>Vc});function Hc(e,t){let{cleanMode:s,options:r,valid:i}=Kc(e);return s?i.options?(r.push(...t),r.some(Zc)?Y(ur):Ia(s,r)):Y(hr+JSON.stringify(e)):Y(cr)}function Ia(e,t){return{commands:["clean",`-${e}`,...t],format:"utf-8",parser(r){return Uc(e==="n",r)}}}function Vc(e){return Array.isArray(e)&&e.every(t=>fr.has(t))}function Kc(e){let t,s=[],r={cleanMode:!1,options:!0};return e.replace(/[^a-z]i/g,"").split("").forEach(i=>{Yc(i)?(t=i,r.cleanMode=!0):r.options=r.options&&Qc(s[s.length]=`-${i}`)}),{cleanMode:t,options:s,valid:r}}function Yc(e){return e==="f"||e==="n"}function Qc(e){return/^-[a-z]$/i.test(e)&&fr.has(e.charAt(1))}function Zc(e){return/^-[^\-]/.test(e)?e.indexOf("i")>0:e==="--interactive"}var ur,cr,hr,we,fr,La=m({"src/lib/tasks/clean.ts"(){Wc(),k(),$(),ur="Git clean interactive mode is not supported",cr='Git clean mode parameter ("n" or "f") is required',hr="Git clean unknown option found in: ",we=(e=>(e.DRY_RUN="n",e.FORCE="f",e.IGNORED_INCLUDED="x",e.IGNORED_ONLY="X",e.EXCLUDING="e",e.QUIET="q",e.RECURSIVE="d",e))(we||{}),fr=new Set(["i",...ga(Object.values(we))])}});function Jc(e){let t=new Ba;for(let s of Da(e))t.addValue(s.file,String(s.key),s.value);return t}function Xc(e,t){let s=null,r=[],i=new Map;for(let n of Da(e,t))n.key===t&&(r.push(s=n.value),i.has(n.file)||i.set(n.file,[]),i.get(n.file).push(s));return{key:t,paths:Array.from(i.keys()),scopes:i,value:s,values:r}}function th(e){return e.replace(/^(file):/,"")}function*Da(e,t=null){let s=e.split("\0");for(let r=0,i=s.length-1;r<i;){let n=th(s[r++]),a=s[r++],o=t;if(a.includes(`
`)){let l=fa(a,`
`);o=l[0],a=l[1]}yield{file:n,key:o,value:a}}}var Ba,eh=m({"src/lib/responses/ConfigList.ts"(){k(),Ba=class{constructor(){this.files=[],this.values=Object.create(null)}get all(){return this._all||(this._all=this.files.reduce((e,t)=>Object.assign(e,this.values[t]),{})),this._all}addFile(e){if(!(e in this.values)){let t=Ot(this.files);this.values[e]=t?Object.create(this.values[t]):{},this.files.push(e)}return this.values[e]}addValue(e,t,s){let r=this.addFile(e);r.hasOwnProperty(t)?Array.isArray(r[t])?r[t].push(s):r[t]=[r[t],s]:r[t]=s,this._all=void 0}}}});function Is(e,t){return typeof e=="string"&&Vs.hasOwnProperty(e)?e:t}function sh(e,t,s,r){let i=["config",`--${r}`];return s&&i.push("--add"),i.push(e,t),{commands:i,format:"utf-8",parser(n){return n}}}function rh(e,t){let s=["config","--null","--show-origin","--get-all",e];return t&&s.splice(1,0,`--${t}`),{commands:s,format:"utf-8",parser(r){return Xc(r,e)}}}function ih(e){let t=["config","--list","--show-origin","--null"];return e&&t.push(`--${e}`),{commands:t,format:"utf-8",parser(s){return Jc(s)}}}function nh(){return{addConfig(e,t,...s){return this._runTask(sh(e,t,s[0]===!0,Is(s[1],"local")),q(arguments))},getConfig(e,t){return this._runTask(rh(e,Is(t,void 0)),q(arguments))},listConfig(...e){return this._runTask(ih(Is(e[0],void 0)),q(arguments))}}}var Vs,Na=m({"src/lib/tasks/config.ts"(){eh(),k(),Vs=(e=>(e.system="system",e.global="global",e.local="local",e.worktree="worktree",e))(Vs||{})}});function ah(...e){return new za().param(...e)}function oh(e){let t=new Set,s={};return er(e,r=>{let[i,n,a]=r.split(Dt);t.add(i),(s[i]=s[i]||[]).push({line:P(n),path:i,preview:a})}),{paths:t,results:s}}function lh(){return{grep(e){let t=q(arguments),s=K(arguments);for(let i of Ga)if(s.includes(i))return this._runTask(Y(`git.grep: use of "${i}" is not supported.`),t);typeof e=="string"&&(e=ah().param(e));let r=["grep","--null","-n","--full-name",...s,...e];return this._runTask({commands:r,format:"utf-8",parser(i){return oh(i)}},t)}}}var Ga,Ht,jn,za,Ua=m({"src/lib/tasks/grep.ts"(){k(),$(),Ga=["-h"],Ht=Symbol("grepQuery"),za=class{constructor(){this[jn]=[]}*[(jn=Ht,Symbol.iterator)](){for(let e of this[Ht])yield e}and(...e){return e.length&&this[Ht].push("--and","(",...Yt(e,"-e"),")"),this}param(...e){return this[Ht].push(...Yt(e,"-e")),this}}}}),Wa={};M(Wa,{ResetMode:()=>ve,getResetMode:()=>ch,resetTask:()=>uh});function uh(e,t){let s=["reset"];return Ha(e)&&s.push(`--${e}`),s.push(...t),H(s)}function ch(e){if(Ha(e))return e;switch(typeof e){case"string":case"undefined":return"soft"}}function Ha(e){return Va.includes(e)}var ve,Va,Ka=m({"src/lib/tasks/reset.ts"(){$(),ve=(e=>(e.MIXED="mixed",e.SOFT="soft",e.HARD="hard",e.MERGE="merge",e.KEEP="keep",e))(ve||{}),Va=Array.from(Object.values(ve))}});function hh(){return(0,Te.default)("simple-git")}function qn(e,t,s){return!t||!String(t).replace(/\s*/,"")?s?(r,...i)=>{e(r,...i),s(r,...i)}:e:(r,...i)=>{e(`%s ${r}`,t,...i),s&&s(r,...i)}}function fh(e,t,{namespace:s}){if(typeof e=="string")return e;let r=t&&t.namespace||"";return r.startsWith(s)?r.substr(s.length+1):r||s}function dr(e,t,s,r=hh()){let i=e&&`[${e}]`||"",n=[],a=typeof t=="string"?r.extend(t):t,o=fh(lt(t,U),a,r);return u(s);function l(h,c){return R(n,dr(e,o.replace(/^[^:]+/,h),c,r))}function u(h){let c=h&&`[${h}]`||"",p=a&&qn(a,c)||Rt,f=qn(r,`${i} ${c}`,p);return Object.assign(a?p:f,{label:e,sibling:l,info:f,step:u})}}var Ya=m({"src/lib/git-logger.ts"(){k(),Te.default.formatters.L=e=>String(nr(e)?e.length:"-"),Te.default.formatters.B=e=>Buffer.isBuffer(e)?e.toString("utf8"):ee(e)}}),ye,Ks,dh=m({"src/lib/runners/tasks-pending-queue.ts"(){wt(),Ya(),ye=class{constructor(e="GitExecutor"){this.logLabel=e,this._queue=new Map}withProgress(e){return this._queue.get(e)}createProgress(e){let t=ye.getName(e.commands[0]),s=dr(this.logLabel,t);return{task:e,logger:s,name:t}}push(e){let t=this.createProgress(e);return t.logger("Adding task to the queue, commands = %o",e.commands),this._queue.set(e,t),t}fatal(e){for(let[t,{logger:s}]of Array.from(this._queue.entries()))t===e.task?(s.info("Failed %o",e),s("Fatal exception, any as-yet un-started tasks run through this executor will not be attempted")):s.info("A fatal exception occurred in a previous task, the queue has been purged: %o",e.message),this.complete(t);if(this._queue.size!==0)throw new Error(`Queue size should be zero after fatal: ${this._queue.size}`)}complete(e){this.withProgress(e)&&this._queue.delete(e)}attempt(e){let t=this.withProgress(e);if(!t)throw new ct(void 0,"TasksPendingQueue: attempt called for an unknown task");return t.logger("Starting task"),t}static getName(e="empty"){return`task:${e}:${++ye.counter}`}},Ks=ye,Ks.counter=0}});function It(e,t){return{method:da(e.commands)||"",commands:t}}function ph(e,t){return s=>{t("[ERROR] child process exception %o",s),e.push(Buffer.from(String(s.stack),"ascii"))}}function $n(e,t,s,r){return i=>{s("%s received %L bytes",t,i),r("%B",i),e.push(i)}}var Ys,mh=m({"src/lib/runners/git-executor-chain.ts"(){wt(),$(),k(),dh(),Ys=class{constructor(e,t,s){this._executor=e,this._scheduler=t,this._plugins=s,this._chain=Promise.resolve(),this._queue=new Ks}get binary(){return this._executor.binary}get cwd(){return this._cwd||this._executor.cwd}set cwd(e){this._cwd=e}get env(){return this._executor.env}get outputHandler(){return this._executor.outputHandler}chain(){return this}push(e){return this._queue.push(e),this._chain=this._chain.then(()=>this.attemptTask(e))}attemptTask(e){return Vt(this,null,function*(){let t=yield this._scheduler.next(),s=()=>this._queue.complete(e);try{let{logger:r}=this._queue.attempt(e);return yield $a(e)?this.attemptEmptyTask(e,r):this.attemptRemoteTask(e,r)}catch(r){throw this.onFatalException(e,r)}finally{s(),t()}})}onFatalException(e,t){let s=t instanceof ct?Object.assign(t,{task:e}):new ct(e,t&&String(t));return this._chain=Promise.resolve(),this._queue.fatal(s),s}attemptRemoteTask(e,t){return Vt(this,null,function*(){let s=this._plugins.exec("spawn.args",[...e.commands],It(e,e.commands)),r=yield this.gitResponse(e,this.binary,s,this.outputHandler,t.step("SPAWN")),i=yield this.handleTaskData(e,s,r,t.step("HANDLE"));return t("passing response to task's parser as a %s",e.format),qa(e)?Us(e.parser,i):Us(e.parser,i.asStrings())})}attemptEmptyTask(e,t){return Vt(this,null,function*(){return t("empty task bypassing child process to call to task's parser"),e.parser(this)})}handleTaskData(e,t,s,r){let{exitCode:i,rejection:n,stdOut:a,stdErr:o}=s;return new Promise((l,u)=>{r("Preparing to handle process response exitCode=%d stdOut=",i);let{error:h}=this._plugins.exec("task.error",{error:n},st(st({},It(e,t)),s));if(h&&e.onError)return r.info("exitCode=%s handling with custom error handler"),e.onError(s,h,c=>{r.info("custom error handler treated as success"),r("custom error returned a %s",ee(c)),l(new Zt(Array.isArray(c)?Buffer.concat(c):c,Buffer.concat(o)))},u);if(h)return r.info("handling as error: exitCode=%s stdErr=%s rejection=%o",i,o.length,n),u(h);r.info("retrieving task output complete"),l(new Zt(Buffer.concat(a),Buffer.concat(o)))})}gitResponse(e,t,s,r,i){return Vt(this,null,function*(){let n=i.sibling("output"),a=this._plugins.exec("spawn.options",{cwd:this.cwd,env:this.env,windowsHide:!0},It(e,e.commands));return new Promise(o=>{let l=[],u=[];i.info("%s %o",t,s),i("%O",a);let h=this._beforeSpawn(e,s);if(h)return o({stdOut:l,stdErr:u,exitCode:9901,rejection:h});this._plugins.exec("spawn.before",void 0,Kt(st({},It(e,s)),{kill(p){h=p||h}}));let c=(0,Qa.spawn)(t,s,a);c.stdout.on("data",$n(l,"stdOut",i,n.step("stdOut"))),c.stderr.on("data",$n(u,"stdErr",i,n.step("stdErr"))),c.on("error",ph(u,i)),r&&(i("Passing child process stdOut/stdErr to custom outputHandler"),r(t,c.stdout,c.stderr,[...s])),this._plugins.exec("spawn.after",void 0,Kt(st({},It(e,s)),{spawned:c,close(p,f){o({stdOut:l,stdErr:u,exitCode:p,rejection:h||f})},kill(p){c.killed||(h=p,c.kill("SIGINT"))}}))})})}_beforeSpawn(e,t){let s;return this._plugins.exec("spawn.before",void 0,Kt(st({},It(e,t)),{kill(r){s=r||s}})),s}}}}),Za={};M(Za,{GitExecutor:()=>Ja});var Ja,gh=m({"src/lib/runners/git-executor.ts"(){mh(),Ja=class{constructor(e="git",t,s,r){this.binary=e,this.cwd=t,this._scheduler=s,this._plugins=r,this._chain=new Ys(this,this._scheduler,this._plugins)}chain(){return new Ys(this,this._scheduler,this._plugins)}push(e){return this._chain.push(e)}}}});function yh(e,t,s=Rt){let r=n=>{s(null,n)},i=n=>{n?.task===e&&s(n instanceof Xt?bh(n):n,void 0)};t.then(r,i)}function bh(e){let t=r=>{console.warn(`simple-git deprecation notice: accessing GitResponseError.${r} should be GitResponseError.git.${r}, this will no longer be available in version 3`),t=Rt};return Object.create(e,Object.getOwnPropertyNames(e.git).reduce(s,{}));function s(r,i){return i in e||(r[i]={enumerable:!1,configurable:!1,get(){return t(i),e.git[i]}}),r}}var wh=m({"src/lib/task-callback.ts"(){Bt(),k()}});function Mn(e,t){return Fa(s=>{if(!sr(e))throw new Error(`Git.cwd: cannot change to non-directory "${e}"`);return(t||s).cwd=e})}var vh=m({"src/lib/tasks/change-working-directory.ts"(){k(),$()}});function Ls(e){let t=["checkout",...e];return t[1]==="-b"&&t.includes("-B")&&(t[1]=Ae(t,"-B")),H(t)}function kh(){return{checkout(){return this._runTask(Ls(K(arguments,1)),q(arguments))},checkoutBranch(e,t){return this._runTask(Ls(["-b",e,t,...K(arguments)]),q(arguments))},checkoutLocalBranch(e){return this._runTask(Ls(["-b",e,...K(arguments)]),q(arguments))}}}var _h=m({"src/lib/tasks/checkout.ts"(){k(),$()}});function xh(e){return X({author:null,branch:"",commit:"",root:!1,summary:{changes:0,insertions:0,deletions:0}},Xa,e)}var Xa,Ch=m({"src/lib/parsers/parse-commit.ts"(){k(),Xa=[new x(/^\[([^\s]+)( \([^)]+\))? ([^\]]+)/,(e,[t,s,r])=>{e.branch=t,e.commit=r,e.root=!!s}),new x(/\s*Author:\s(.+)/i,(e,[t])=>{let s=t.split("<"),r=s.pop();!r||!r.includes("@")||(e.author={email:r.substr(0,r.length-1),name:s.join("<").trim()})}),new x(/(\d+)[^,]*(?:,\s*(\d+)[^,]*)(?:,\s*(\d+))/g,(e,[t,s,r])=>{e.summary.changes=parseInt(t,10)||0,e.summary.insertions=parseInt(s,10)||0,e.summary.deletions=parseInt(r,10)||0}),new x(/^(\d+)[^,]*(?:,\s*(\d+)[^(]+\(([+-]))?/,(e,[t,s,r])=>{e.summary.changes=parseInt(t,10)||0;let i=parseInt(s,10)||0;r==="-"?e.summary.deletions=i:r==="+"&&(e.summary.insertions=i)})]}});function Th(e,t,s){return{commands:["-c","core.abbrev=40","commit",...Yt(e,"-m"),...t,...s],format:"utf-8",parser:xh}}function Sh(){return{commit(t,...s){let r=q(arguments),i=e(t)||Th(bt(t),bt(lt(s[0],Ce,[])),[...lt(s[1],se,[]),...K(arguments,0,!0)]);return this._runTask(i,r)}};function e(t){return!Ce(t)&&Y("git.commit: requires the commit message to be supplied as a string/string[]")}}var Oh=m({"src/lib/tasks/commit.ts"(){Ch(),k(),$()}});function Rh(){return{firstCommit(){return this._runTask(H(["rev-list","--max-parents=0","HEAD"],!0),q(arguments))}}}var Eh=m({"src/lib/tasks/first-commit.ts"(){k(),$()}});function Ah(e,t){let s=["hash-object",e];return t&&s.push("-w"),H(s,!0)}var Ph=m({"src/lib/tasks/hash-object.ts"(){$()}});function Fh(e,t,s){let r=String(s).trim(),i;if(i=to.exec(r))return new ke(e,t,!1,i[1]);if(i=eo.exec(r))return new ke(e,t,!0,i[1]);let n="",a=r.split(" ");for(;a.length;)if(a.shift()==="in"){n=a.join(" ");break}return new ke(e,t,/^re/i.test(r),n)}var ke,to,eo,jh=m({"src/lib/responses/InitSummary.ts"(){ke=class{constructor(e,t,s,r){this.bare=e,this.path=t,this.existing=s,this.gitDir=r}},to=/^Init.+ repository in (.+)$/,eo=/^Rein.+ in (.+)$/}});function qh(e){return e.includes(pr)}function $h(e=!1,t,s){let r=["init",...s];return e&&!qh(r)&&r.splice(1,0,pr),{commands:r,format:"utf-8",parser(i){return Fh(r.includes("--bare"),t,i)}}}var pr,Mh=m({"src/lib/tasks/init.ts"(){jh(),pr="--bare"}});function mr(e){for(let t=0;t<e.length;t++){let s=gr.exec(e[t]);if(s)return`--${s[1]}`}return""}function Ih(e){return gr.test(e)}var gr,re=m({"src/lib/args/log-format.ts"(){gr=/^--(stat|numstat|name-only|name-status)(=|$)/}}),so,Lh=m({"src/lib/responses/DiffSummary.ts"(){so=class{constructor(){this.changed=0,this.deletions=0,this.insertions=0,this.files=[]}}}});function ro(e=""){let t=io[e];return s=>X(new so,t,s,!1)}var Ds,In,Ln,Dn,io,no=m({"src/lib/parsers/parse-diff-summary.ts"(){re(),Lh(),k(),Ds=[new x(/(.+)\s+\|\s+(\d+)(\s+[+\-]+)?$/,(e,[t,s,r=""])=>{e.files.push({file:t.trim(),changes:P(s),insertions:r.replace(/[^+]/g,"").length,deletions:r.replace(/[^-]/g,"").length,binary:!1})}),new x(/(.+) \|\s+Bin ([0-9.]+) -> ([0-9.]+) ([a-z]+)/,(e,[t,s,r])=>{e.files.push({file:t.trim(),before:P(s),after:P(r),binary:!0})}),new x(/(\d+) files? changed\s*((?:, \d+ [^,]+){0,2})/,(e,[t,s])=>{let r=/(\d+) i/.exec(s),i=/(\d+) d/.exec(s);e.changed=P(t),e.insertions=P(r?.[1]),e.deletions=P(i?.[1])})],In=[new x(/(\d+)\t(\d+)\t(.+)$/,(e,[t,s,r])=>{let i=P(t),n=P(s);e.changed++,e.insertions+=i,e.deletions+=n,e.files.push({file:r,changes:i+n,insertions:i,deletions:n,binary:!1})}),new x(/-\t-\t(.+)$/,(e,[t])=>{e.changed++,e.files.push({file:t,after:0,before:0,binary:!0})})],Ln=[new x(/(.+)$/,(e,[t])=>{e.changed++,e.files.push({file:t,changes:0,insertions:0,deletions:0,binary:!1})})],Dn=[new x(/([ACDMRTUXB])\s*(.+)$/,(e,[t,s])=>{e.changed++,e.files.push({file:s,changes:0,insertions:0,deletions:0,binary:!1})})],io={"":Ds,"--stat":Ds,"--numstat":In,"--name-status":Dn,"--name-only":Ln}}});function Dh(e,t){return t.reduce((s,r,i)=>(s[r]=e[i]||"",s),Object.create({diff:null}))}function ao(e=wr,t=oo,s=""){let r=ro(s);return function(i){let n=te(i,!0,yr).map(function(a){let o=a.trim().split(br),l=Dh(o[0].trim().split(e),t);return o.length>1&&o[1].trim()&&(l.diff=r(o[1])),l});return{all:n,latest:n.length&&n[0]||null,total:n.length}}}var yr,br,wr,oo,lo=m({"src/lib/parsers/parse-list-log-summary.ts"(){k(),no(),re(),yr="\xF2\xF2\xF2\xF2\xF2\xF2 ",br=" \xF2\xF2",wr=" \xF2 ",oo=["hash","date","message","refs","author_name","author_email"]}}),uo={};M(uo,{diffSummaryTask:()=>Bh,validateLogFormatConfig:()=>qe});function Bh(e){let t=mr(e),s=["diff"];return t===""&&(t="--stat",s.push("--stat=4096")),s.push(...e),qe(s)||{commands:s,format:"utf-8",parser:ro(t)}}function qe(e){let t=e.filter(Ih);if(t.length>1)return Y(`Summary flags are mutually exclusive - pick one of ${t.join(",")}`);if(t.length&&e.includes("-z"))return Y(`Summary flag ${t} parsing is not compatible with null termination option '-z'`)}var vr=m({"src/lib/tasks/diff.ts"(){re(),no(),$()}});function Nh(e,t){let s=[],r=[];return Object.keys(e).forEach(i=>{s.push(i),r.push(String(e[i]))}),[s,r.join(t)]}function Gh(e){return Object.keys(e).reduce((t,s)=>(s in Qs||(t[s]=e[s]),t),{})}function co(e={},t=[]){let s=lt(e.splitter,U,wr),r=!rr(e.format)&&e.format?e.format:{hash:"%H",date:e.strictDate===!1?"%ai":"%aI",message:"%s",refs:"%D",body:e.multiLine?"%B":"%b",author_name:e.mailMap!==!1?"%aN":"%an",author_email:e.mailMap!==!1?"%aE":"%ae"},[i,n]=Nh(r,s),a=[],o=[`--pretty=format:${yr}${n}${br}`,...t],l=e.n||e["max-count"]||e.maxCount;if(l&&o.push(`--max-count=${l}`),e.from||e.to){let u=e.symmetric!==!1?"...":"..";a.push(`${e.from||""}${u}${e.to||""}`)}return U(e.file)&&o.push("--follow",qc(e.file)),ar(Gh(e),o),{fields:i,splitter:s,commands:[...o,...a]}}function zh(e,t,s){let r=ao(e,t,mr(s));return{commands:["log",...s],format:"utf-8",parser:r}}function Uh(){return{log(...s){let r=q(arguments),i=co(or(arguments),lt(arguments[0],se)),n=t(...s)||qe(i.commands)||e(i);return this._runTask(n,r)}};function e(s){return zh(s.splitter,s.fields,s.commands)}function t(s,r){return U(s)&&U(r)&&Y("git.log(string, string) should be replaced with git.log({ from: string, to: string })")}}var Qs,ho=m({"src/lib/tasks/log.ts"(){re(),Jt(),lo(),k(),$(),vr(),Qs=(e=>(e[e["--pretty"]=0]="--pretty",e[e["max-count"]=1]="max-count",e[e.maxCount=2]="maxCount",e[e.n=3]="n",e[e.file=4]="file",e[e.format=5]="format",e[e.from=6]="from",e[e.to=7]="to",e[e.splitter=8]="splitter",e[e.symmetric=9]="symmetric",e[e.mailMap=10]="mailMap",e[e.multiLine=11]="multiLine",e[e.strictDate=12]="strictDate",e))(Qs||{})}}),_e,fo,Wh=m({"src/lib/responses/MergeSummary.ts"(){_e=class{constructor(e,t=null,s){this.reason=e,this.file=t,this.meta=s}toString(){return`${this.file}:${this.reason}`}},fo=class{constructor(){this.conflicts=[],this.merges=[],this.result="success"}get failed(){return this.conflicts.length>0}get reason(){return this.result}toString(){return this.conflicts.length?`CONFLICTS: ${this.conflicts.join(", ")}`:"OK"}}}}),Zs,po,Hh=m({"src/lib/responses/PullSummary.ts"(){Zs=class{constructor(){this.remoteMessages={all:[]},this.created=[],this.deleted=[],this.files=[],this.deletions={},this.insertions={},this.summary={changes:0,deletions:0,insertions:0}}},po=class{constructor(){this.remote="",this.hash={local:"",remote:""},this.branch={local:"",remote:""},this.message=""}toString(){return this.message}}}});function Bs(e){return e.objects=e.objects||{compressing:0,counting:0,enumerating:0,packReused:0,reused:{count:0,delta:0},total:{count:0,delta:0}}}function Bn(e){let t=/^\s*(\d+)/.exec(e),s=/delta (\d+)/i.exec(e);return{count:P(t&&t[1]||"0"),delta:P(s&&s[1]||"0")}}var mo,Vh=m({"src/lib/parsers/parse-remote-objects.ts"(){k(),mo=[new yt(/^remote:\s*(enumerating|counting|compressing) objects: (\d+),/i,(e,[t,s])=>{let r=t.toLowerCase(),i=Bs(e.remoteMessages);Object.assign(i,{[r]:P(s)})}),new yt(/^remote:\s*(enumerating|counting|compressing) objects: \d+% \(\d+\/(\d+)\),/i,(e,[t,s])=>{let r=t.toLowerCase(),i=Bs(e.remoteMessages);Object.assign(i,{[r]:P(s)})}),new yt(/total ([^,]+), reused ([^,]+), pack-reused (\d+)/i,(e,[t,s,r])=>{let i=Bs(e.remoteMessages);i.total=Bn(t),i.reused=Bn(s),i.packReused=P(r)})]}});function go(e,t){return X({remoteMessages:new bo},yo,t)}var yo,bo,wo=m({"src/lib/parsers/parse-remote-messages.ts"(){k(),Vh(),yo=[new yt(/^remote:\s*(.+)$/,(e,[t])=>(e.remoteMessages.all.push(t.trim()),!1)),...mo,new yt([/create a (?:pull|merge) request/i,/\s(https?:\/\/\S+)$/],(e,[t])=>{e.remoteMessages.pullRequestUrl=t}),new yt([/found (\d+) vulnerabilities.+\(([^)]+)\)/i,/\s(https?:\/\/\S+)$/],(e,[t,s,r])=>{e.remoteMessages.vulnerabilities={count:P(t),summary:s,url:r}})],bo=class{constructor(){this.all=[]}}}});function Kh(e,t){let s=X(new po,vo,[e,t]);return s.message&&s}var Nn,Gn,zn,Un,vo,Wn,kr,ko=m({"src/lib/parsers/parse-pull.ts"(){Hh(),k(),wo(),Nn=/^\s*(.+?)\s+\|\s+\d+\s*(\+*)(-*)/,Gn=/(\d+)\D+((\d+)\D+\(\+\))?(\D+(\d+)\D+\(-\))?/,zn=/^(create|delete) mode \d+ (.+)/,Un=[new x(Nn,(e,[t,s,r])=>{e.files.push(t),s&&(e.insertions[t]=s.length),r&&(e.deletions[t]=r.length)}),new x(Gn,(e,[t,,s,,r])=>s!==void 0||r!==void 0?(e.summary.changes=+t||0,e.summary.insertions=+s||0,e.summary.deletions=+r||0,!0):!1),new x(zn,(e,[t,s])=>{R(e.files,s),R(t==="create"?e.created:e.deleted,s)})],vo=[new x(/^from\s(.+)$/i,(e,[t])=>void(e.remote=t)),new x(/^fatal:\s(.+)$/,(e,[t])=>void(e.message=t)),new x(/([a-z0-9]+)\.\.([a-z0-9]+)\s+(\S+)\s+->\s+(\S+)$/,(e,[t,s,r,i])=>{e.branch.local=r,e.hash.local=t,e.branch.remote=i,e.hash.remote=s})],Wn=(e,t)=>X(new Zs,Un,[e,t]),kr=(e,t)=>Object.assign(new Zs,Wn(e,t),go(e,t))}}),Hn,_o,Vn,Yh=m({"src/lib/parsers/parse-merge.ts"(){Wh(),k(),ko(),Hn=[new x(/^Auto-merging\s+(.+)$/,(e,[t])=>{e.merges.push(t)}),new x(/^CONFLICT\s+\((.+)\): Merge conflict in (.+)$/,(e,[t,s])=>{e.conflicts.push(new _e(t,s))}),new x(/^CONFLICT\s+\((.+\/delete)\): (.+) deleted in (.+) and/,(e,[t,s,r])=>{e.conflicts.push(new _e(t,s,{deleteRef:r}))}),new x(/^CONFLICT\s+\((.+)\):/,(e,[t])=>{e.conflicts.push(new _e(t,null))}),new x(/^Automatic merge failed;\s+(.+)$/,(e,[t])=>{e.result=t})],_o=(e,t)=>Object.assign(Vn(e,t),kr(e,t)),Vn=e=>X(new fo,Hn,e)}});function Kn(e){return e.length?{commands:["merge",...e],format:"utf-8",parser(t,s){let r=_o(t,s);if(r.failed)throw new Xt(r);return r}}:Y("Git.merge requires at least one option")}var Qh=m({"src/lib/tasks/merge.ts"(){Bt(),Yh(),$()}});function Zh(e,t,s){let r=s.includes("deleted"),i=s.includes("tag")||/^refs\/tags/.test(e),n=!s.includes("new");return{deleted:r,tag:i,branch:!i,new:!n,alreadyUpdated:n,local:e,remote:t}}var Yn,xo,Qn,Jh=m({"src/lib/parsers/parse-push.ts"(){k(),wo(),Yn=[new x(/^Pushing to (.+)$/,(e,[t])=>{e.repo=t}),new x(/^updating local tracking ref '(.+)'/,(e,[t])=>{e.ref=Kt(st({},e.ref||{}),{local:t})}),new x(/^[=*-]\s+([^:]+):(\S+)\s+\[(.+)]$/,(e,[t,s,r])=>{e.pushed.push(Zh(t,s,r))}),new x(/^Branch '([^']+)' set up to track remote branch '([^']+)' from '([^']+)'/,(e,[t,s,r])=>{e.branch=Kt(st({},e.branch||{}),{local:t,remote:s,remoteName:r})}),new x(/^([^:]+):(\S+)\s+([a-z0-9]+)\.\.([a-z0-9]+)$/,(e,[t,s,r,i])=>{e.update={head:{local:t,remote:s},hash:{from:r,to:i}}})],xo=(e,t)=>{let s=Qn(e,t),r=go(e,t);return st(st({},s),r)},Qn=(e,t)=>X({pushed:[]},Yn,[e,t])}}),Co={};M(Co,{pushTagsTask:()=>Xh,pushTask:()=>_r});function Xh(e={},t){return R(t,"--tags"),_r(e,t)}function _r(e={},t){let s=["push",...t];return e.branch&&s.splice(1,0,e.branch),e.remote&&s.splice(1,0,e.remote),Ae(s,"-v"),R(s,"--verbose"),R(s,"--porcelain"),{commands:s,format:"utf-8",parser:xo}}var To=m({"src/lib/tasks/push.ts"(){Jh(),k()}});function tf(){return{showBuffer(){let e=["show",...K(arguments,1)];return e.includes("--binary")||e.splice(1,0,"--binary"),this._runTask(ja(e),q(arguments))},show(){let e=["show",...K(arguments,1)];return this._runTask(H(e),q(arguments))}}}var ef=m({"src/lib/tasks/show.ts"(){k(),$()}}),Zn,So,sf=m({"src/lib/responses/FileStatusSummary.ts"(){Zn=/^(.+) -> (.+)$/,So=class{constructor(e,t,s){if(this.path=e,this.index=t,this.working_dir=s,t+s==="R"){let r=Zn.exec(e)||[null,e,e];this.from=r[1]||"",this.path=r[2]||""}}}}});function Jn(e){let[t,s]=e.split(Dt);return{from:s||t,to:t}}function J(e,t,s){return[`${e}${t}`,s]}function Ns(e,...t){return t.map(s=>J(e,s,(r,i)=>R(r.conflicted,i)))}function rf(e,t){let s=t.trim();switch(" "){case s.charAt(2):return r(s.charAt(0),s.charAt(1),s.substr(3));case s.charAt(1):return r(" ",s.charAt(0),s.substr(2));default:return}function r(i,n,a){let o=`${i}${n}`,l=Oo.get(o);l&&l(e,a),o!=="##"&&o!=="!!"&&e.files.push(new So(a.replace(/\0.+$/,""),i,n))}}var Xn,Oo,Ro,nf=m({"src/lib/responses/StatusSummary.ts"(){k(),sf(),Xn=class{constructor(){this.not_added=[],this.conflicted=[],this.created=[],this.deleted=[],this.ignored=void 0,this.modified=[],this.renamed=[],this.files=[],this.staged=[],this.ahead=0,this.behind=0,this.current=null,this.tracking=null,this.detached=!1,this.isClean=()=>!this.files.length}},Oo=new Map([J(" ","A",(e,t)=>R(e.created,t)),J(" ","D",(e,t)=>R(e.deleted,t)),J(" ","M",(e,t)=>R(e.modified,t)),J("A"," ",(e,t)=>R(e.created,t)&&R(e.staged,t)),J("A","M",(e,t)=>R(e.created,t)&&R(e.staged,t)&&R(e.modified,t)),J("D"," ",(e,t)=>R(e.deleted,t)&&R(e.staged,t)),J("M"," ",(e,t)=>R(e.modified,t)&&R(e.staged,t)),J("M","M",(e,t)=>R(e.modified,t)&&R(e.staged,t)),J("R"," ",(e,t)=>{R(e.renamed,Jn(t))}),J("R","M",(e,t)=>{let s=Jn(t);R(e.renamed,s),R(e.modified,s.to)}),J("!","!",(e,t)=>{R(e.ignored=e.ignored||[],t)}),J("?","?",(e,t)=>R(e.not_added,t)),...Ns("A","A","U"),...Ns("D","D","U"),...Ns("U","A","D","U"),["##",(e,t)=>{let s=/ahead (\d+)/,r=/behind (\d+)/,i=/^(.+?(?=(?:\.{3}|\s|$)))/,n=/\.{3}(\S*)/,a=/\son\s([\S]+)$/,o;o=s.exec(t),e.ahead=o&&+o[1]||0,o=r.exec(t),e.behind=o&&+o[1]||0,o=i.exec(t),e.current=o&&o[1],o=n.exec(t),e.tracking=o&&o[1],o=a.exec(t),e.current=o&&o[1]||e.current,e.detached=/\(no branch\)/.test(t)}]]),Ro=function(e){let t=e.split(Dt),s=new Xn;for(let r=0,i=t.length;r<i;){let n=t[r++].trim();n&&(n.charAt(0)==="R"&&(n+=Dt+(t[r++]||"")),rf(s,n))}return s}}});function af(e){return{format:"utf-8",commands:["status","--porcelain","-b","-u","--null",...e.filter(s=>!Eo.includes(s))],parser(s){return Ro(s)}}}var Eo,of=m({"src/lib/tasks/status.ts"(){nf(),Eo=["--null","-z"]}});function Se(e=0,t=0,s=0,r="",i=!0){return Object.defineProperty({major:e,minor:t,patch:s,agent:r,installed:i},"toString",{value(){return`${this.major}.${this.minor}.${this.patch}`},configurable:!1,enumerable:!1})}function lf(){return Se(0,0,0,"",!1)}function uf(){return{version(){return this._runTask({commands:["--version"],format:"utf-8",parser:cf,onError(e,t,s,r){if(e.exitCode===-2)return s(Buffer.from(xr));r(t)}})}}}function cf(e){return e===xr?lf():X(Se(0,0,0,e),Ao,e)}var xr,Ao,hf=m({"src/lib/tasks/version.ts"(){k(),xr="installed=false",Ao=[new x(/version (\d+)\.(\d+)\.(\d+)(?:\s*\((.+)\))?/,(e,[t,s,r,i=""])=>{Object.assign(e,Se(P(t),P(s),P(r),i))}),new x(/version (\d+)\.(\d+)\.(\D+)(.+)?$/,(e,[t,s,r,i=""])=>{Object.assign(e,Se(P(t),P(s),r,i))})]}}),Po={};M(Po,{SimpleGitApi:()=>Js});var Js,ff=m({"src/lib/simple-git-api.ts"(){wh(),vh(),_h(),Oh(),Na(),Eh(),Ua(),Ph(),Mh(),ho(),Qh(),To(),ef(),of(),$(),hf(),k(),Js=class{constructor(e){this._executor=e}_runTask(e,t){let s=this._executor.chain(),r=s.push(e);return t&&yh(e,r,t),Object.create(this,{then:{value:r.then.bind(r)},catch:{value:r.catch.bind(r)},_executor:{value:s}})}add(e){return this._runTask(H(["add",...bt(e)]),q(arguments))}cwd(e){let t=q(arguments);return typeof e=="string"?this._runTask(Mn(e,this._executor),t):typeof e?.path=="string"?this._runTask(Mn(e.path,e.root&&this._executor||void 0),t):this._runTask(Y("Git.cwd: workingDirectory must be supplied as a string"),t)}hashObject(e,t){return this._runTask(Ah(e,t===!0),q(arguments))}init(e){return this._runTask($h(e===!0,this._executor.cwd,K(arguments)),q(arguments))}merge(){return this._runTask(Kn(K(arguments)),q(arguments))}mergeFromTo(e,t){return U(e)&&U(t)?this._runTask(Kn([e,t,...K(arguments)]),q(arguments,!1)):this._runTask(Y("Git.mergeFromTo requires that the 'remote' and 'branch' arguments are supplied as strings"))}outputHandler(e){return this._executor.outputHandler=e,this}push(){let e=_r({remote:lt(arguments[0],U),branch:lt(arguments[1],U)},K(arguments));return this._runTask(e,q(arguments))}stash(){return this._runTask(H(["stash",...K(arguments)]),q(arguments))}status(){return this._runTask(af(K(arguments)),q(arguments))}},Object.assign(Js.prototype,kh(),Sh(),nh(),Rh(),lh(),Uh(),tf(),uf())}}),Fo={};M(Fo,{Scheduler:()=>qo});var ta,qo,df=m({"src/lib/runners/scheduler.ts"(){k(),Ya(),ta=(()=>{let e=0;return()=>{e++;let{promise:t,done:s}=(0,jo.createDeferred)();return{promise:t,done:s,id:e}}})(),qo=class{constructor(e=2){this.concurrency=e,this.logger=dr("","scheduler"),this.pending=[],this.running=[],this.logger("Constructed, concurrency=%s",e)}schedule(){if(!this.pending.length||this.running.length>=this.concurrency){this.logger("Schedule attempt ignored, pending=%s running=%s concurrency=%s",this.pending.length,this.running.length,this.concurrency);return}let e=R(this.running,this.pending.shift());this.logger("Attempting id=%s",e.id),e.done(()=>{this.logger("Completing id=",e.id),Ae(this.running,e),this.schedule()})}next(){let{promise:e,id:t}=R(this.pending,ta());return this.logger("Scheduling id=%s",t),this.schedule(),e}}}}),$o={};M($o,{applyPatchTask:()=>pf});function pf(e,t){return H(["apply",...t,...e])}var mf=m({"src/lib/tasks/apply-patch.ts"(){$()}});function gf(e,t){return{branch:e,hash:t,success:!0}}function yf(e){return{branch:e,hash:null,success:!1}}var Mo,bf=m({"src/lib/responses/BranchDeleteSummary.ts"(){Mo=class{constructor(){this.all=[],this.branches={},this.errors=[]}get success(){return!this.errors.length}}}});function Io(e,t){return t===1&&Xs.test(e)}var ea,Xs,sa,$e,wf=m({"src/lib/parsers/parse-branch-delete.ts"(){bf(),k(),ea=/(\S+)\s+\(\S+\s([^)]+)\)/,Xs=/^error[^']+'([^']+)'/m,sa=[new x(ea,(e,[t,s])=>{let r=gf(t,s);e.all.push(r),e.branches[t]=r}),new x(Xs,(e,[t])=>{let s=yf(t);e.errors.push(s),e.all.push(s),e.branches[t]=s})],$e=(e,t)=>X(new Mo,sa,[e,t])}}),Lo,vf=m({"src/lib/responses/BranchSummary.ts"(){Lo=class{constructor(){this.all=[],this.branches={},this.current="",this.detached=!1}push(e,t,s,r,i){e==="*"&&(this.detached=t,this.current=s),this.all.push(s),this.branches[s]={current:e==="*",linkedWorkTree:e==="+",name:s,commit:r,label:i}}}}});function ra(e){return e?e.charAt(0):""}function Do(e){return X(new Lo,Bo,e)}var Bo,kf=m({"src/lib/parsers/parse-branch.ts"(){vf(),k(),Bo=[new x(/^([*+]\s)?\((?:HEAD )?detached (?:from|at) (\S+)\)\s+([a-z0-9]+)\s(.*)$/,(e,[t,s,r,i])=>{e.push(ra(t),!0,s,r,i)}),new x(/^([*+]\s)?(\S+)\s+([a-z0-9]+)\s?(.*)$/s,(e,[t,s,r,i])=>{e.push(ra(t),!1,s,r,i)})]}}),No={};M(No,{branchLocalTask:()=>xf,branchTask:()=>_f,containsDeleteBranchCommand:()=>Go,deleteBranchTask:()=>Tf,deleteBranchesTask:()=>Cf});function Go(e){let t=["-d","-D","--delete"];return e.some(s=>t.includes(s))}function _f(e){let t=Go(e),s=["branch",...e];return s.length===1&&s.push("-a"),s.includes("-v")||s.splice(1,0,"-v"),{format:"utf-8",commands:s,parser(r,i){return t?$e(r,i).all[0]:Do(r)}}}function xf(){return{format:"utf-8",commands:["branch","-v"],parser:Do}}function Cf(e,t=!1){return{format:"utf-8",commands:["branch","-v",t?"-D":"-d",...e],parser(s,r){return $e(s,r)},onError({exitCode:s,stdOut:r},i,n,a){if(!Io(String(i),s))return a(i);n(r)}}}function Tf(e,t=!1){let s={format:"utf-8",commands:["branch","-v",t?"-D":"-d",e],parser(r,i){return $e(r,i).branches[e]},onError({exitCode:r,stdErr:i,stdOut:n},a,o,l){if(!Io(String(a),r))return l(a);throw new Xt(s.parser(Qt(n),Qt(i)),String(a))}};return s}var Sf=m({"src/lib/tasks/branch.ts"(){Bt(),wf(),kf(),k()}}),zo,Of=m({"src/lib/responses/CheckIgnore.ts"(){zo=e=>e.split(/\n/g).map(t=>t.trim()).filter(t=>!!t)}}),Uo={};M(Uo,{checkIgnoreTask:()=>Rf});function Rf(e){return{commands:["check-ignore",...e],format:"utf-8",parser:zo}}var Ef=m({"src/lib/tasks/check-ignore.ts"(){Of()}}),Wo={};M(Wo,{cloneMirrorTask:()=>Pf,cloneTask:()=>Ho});function Af(e){return/^--upload-pack(=|$)/.test(e)}function Ho(e,t,s){let r=["clone",...s];return U(e)&&r.push(e),U(t)&&r.push(t),r.find(Af)?Y("git.fetch: potential exploit argument blocked."):H(r)}function Pf(e,t,s){return R(s,"--mirror"),Ho(e,t,s)}var Ff=m({"src/lib/tasks/clone.ts"(){$(),k()}});function jf(e,t){return X({raw:e,remote:null,branches:[],tags:[],updated:[],deleted:[]},Vo,[e,t])}var Vo,qf=m({"src/lib/parsers/parse-fetch.ts"(){k(),Vo=[new x(/From (.+)$/,(e,[t])=>{e.remote=t}),new x(/\* \[new branch]\s+(\S+)\s*-> (.+)$/,(e,[t,s])=>{e.branches.push({name:t,tracking:s})}),new x(/\* \[new tag]\s+(\S+)\s*-> (.+)$/,(e,[t,s])=>{e.tags.push({name:t,tracking:s})}),new x(/- \[deleted]\s+\S+\s*-> (.+)$/,(e,[t])=>{e.deleted.push({tracking:t})}),new x(/\s*([^.]+)\.\.(\S+)\s+(\S+)\s*-> (.+)$/,(e,[t,s,r,i])=>{e.updated.push({name:r,tracking:i,to:s,from:t})})]}}),Ko={};M(Ko,{fetchTask:()=>Mf});function $f(e){return/^--upload-pack(=|$)/.test(e)}function Mf(e,t,s){let r=["fetch",...s];return e&&t&&r.push(e,t),r.find($f)?Y("git.fetch: potential exploit argument blocked."):{commands:r,format:"utf-8",parser:jf}}var If=m({"src/lib/tasks/fetch.ts"(){qf(),$()}});function Lf(e){return X({moves:[]},Yo,e)}var Yo,Df=m({"src/lib/parsers/parse-move.ts"(){k(),Yo=[new x(/^Renaming (.+) to (.+)$/,(e,[t,s])=>{e.moves.push({from:t,to:s})})]}}),Qo={};M(Qo,{moveTask:()=>Bf});function Bf(e,t){return{commands:["mv","-v",...bt(e),t],format:"utf-8",parser:Lf}}var Nf=m({"src/lib/tasks/move.ts"(){Df(),k()}}),Zo={};M(Zo,{pullTask:()=>Gf});function Gf(e,t,s){let r=["pull",...s];return e&&t&&r.splice(1,0,e,t),{commands:r,format:"utf-8",parser(i,n){return kr(i,n)},onError(i,n,a,o){let l=Kh(Qt(i.stdOut),Qt(i.stdErr));if(l)return o(new Xt(l));o(n)}}}var zf=m({"src/lib/tasks/pull.ts"(){Bt(),ko(),k()}});function Uf(e){let t={};return Jo(e,([s])=>t[s]={name:s}),Object.values(t)}function Wf(e){let t={};return Jo(e,([s,r,i])=>{t.hasOwnProperty(s)||(t[s]={name:s,refs:{fetch:"",push:""}}),i&&r&&(t[s].refs[i.replace(/[^a-z]/g,"")]=r)}),Object.values(t)}function Jo(e,t){er(e,s=>t(s.split(/\s+/)))}var Hf=m({"src/lib/responses/GetRemoteSummary.ts"(){k()}}),Xo={};M(Xo,{addRemoteTask:()=>Vf,getRemotesTask:()=>Kf,listRemotesTask:()=>Yf,remoteTask:()=>Qf,removeRemoteTask:()=>Zf});function Vf(e,t,s=[]){return H(["remote","add",...s,e,t])}function Kf(e){let t=["remote"];return e&&t.push("-v"),{commands:t,format:"utf-8",parser:e?Wf:Uf}}function Yf(e=[]){let t=[...e];return t[0]!=="ls-remote"&&t.unshift("ls-remote"),H(t)}function Qf(e=[]){let t=[...e];return t[0]!=="remote"&&t.unshift("remote"),H(t)}function Zf(e){return H(["remote","remove",e])}var Jf=m({"src/lib/tasks/remote.ts"(){Hf(),$()}}),tl={};M(tl,{stashListTask:()=>Xf});function Xf(e={},t){let s=co(e),r=["stash","list",...s.commands,...t],i=ao(s.splitter,s.fields,mr(r));return qe(r)||{commands:r,format:"utf-8",parser:i}}var td=m({"src/lib/tasks/stash-list.ts"(){re(),lo(),vr(),ho()}}),el={};M(el,{addSubModuleTask:()=>ed,initSubModuleTask:()=>sd,subModuleTask:()=>Me,updateSubModuleTask:()=>rd});function ed(e,t){return Me(["add",e,t])}function sd(e){return Me(["init",...e])}function Me(e){let t=[...e];return t[0]!=="submodule"&&t.unshift("submodule"),H(t)}function rd(e){return Me(["update",...e])}var id=m({"src/lib/tasks/sub-module.ts"(){$()}});function nd(e,t){let s=isNaN(e),r=isNaN(t);return s!==r?s?1:-1:s?sl(e,t):0}function sl(e,t){return e===t?0:e>t?1:-1}function ad(e){return e.trim()}function be(e){return typeof e=="string"&&parseInt(e.replace(/^\D+/g,""),10)||0}var ia,rl,od=m({"src/lib/responses/TagList.ts"(){ia=class{constructor(e,t){this.all=e,this.latest=t}},rl=function(e,t=!1){let s=e.split(`
`).map(ad).filter(Boolean);t||s.sort(function(i,n){let a=i.split("."),o=n.split(".");if(a.length===1||o.length===1)return nd(be(a[0]),be(o[0]));for(let l=0,u=Math.max(a.length,o.length);l<u;l++){let h=sl(be(a[l]),be(o[l]));if(h)return h}return 0});let r=t?s[0]:[...s].reverse().find(i=>i.indexOf(".")>=0);return new ia(s,r)}}}),il={};M(il,{addAnnotatedTagTask:()=>cd,addTagTask:()=>ud,tagListTask:()=>ld});function ld(e=[]){let t=e.some(s=>/^--sort=/.test(s));return{format:"utf-8",commands:["tag","-l",...e],parser(s){return rl(s,t)}}}function ud(e){return{format:"utf-8",commands:["tag",e],parser(){return{name:e}}}}function cd(e,t){return{format:"utf-8",commands:["tag","-a","-m",t,e],parser(){return{name:e}}}}var hd=m({"src/lib/tasks/tag.ts"(){od()}}),fd=Fc({"src/git.js"(e,t){var{GitExecutor:s}=(gh(),j(Za)),{SimpleGitApi:r}=(ff(),j(Po)),{Scheduler:i}=(df(),j(Fo)),{configurationErrorTask:n}=($(),j(Hs)),{asArray:a,filterArray:o,filterPrimitives:l,filterString:u,filterStringOrStringArray:h,filterType:c,getTrailingOptions:p,trailingFunctionArgument:f,trailingOptionsArgument:b}=(k(),j(xa)),{applyPatchTask:S}=(mf(),j($o)),{branchTask:O,branchLocalTask:w,deleteBranchesTask:C,deleteBranchTask:_}=(Sf(),j(No)),{checkIgnoreTask:E}=(Ef(),j(Uo)),{checkIsRepoTask:B}=(Oa(),j(Ca)),{cloneTask:I,cloneMirrorTask:Et}=(Ff(),j(Wo)),{cleanWithOptionsTask:at,isCleanOptionsArray:Nt}=(La(),j(Ma)),{diffSummaryTask:ht}=(vr(),j(uo)),{fetchTask:Ie}=(If(),j(Ko)),{moveTask:ol}=(Nf(),j(Qo)),{pullTask:ll}=(zf(),j(Zo)),{pushTagsTask:ul}=(To(),j(Co)),{addRemoteTask:cl,getRemotesTask:hl,listRemotesTask:fl,remoteTask:dl,removeRemoteTask:pl}=(Jf(),j(Xo)),{getResetMode:ml,resetTask:gl}=(Ka(),j(Wa)),{stashListTask:yl}=(td(),j(tl)),{addSubModuleTask:bl,initSubModuleTask:wl,subModuleTask:vl,updateSubModuleTask:kl}=(id(),j(el)),{addAnnotatedTagTask:_l,addTagTask:xl,tagListTask:Cl}=(hd(),j(il)),{straightThroughBufferTask:Tl,straightThroughStringTask:ot}=($(),j(Hs));function v(d,g){this._executor=new s(d.binary,d.baseDir,new i(d.maxConcurrentProcesses),g),this._trimmed=d.trimmed}(v.prototype=Object.create(r.prototype)).constructor=v,v.prototype.customBinary=function(d){return this._executor.binary=d,this},v.prototype.env=function(d,g){return arguments.length===1&&typeof d=="object"?this._executor.env=d:(this._executor.env=this._executor.env||{})[d]=g,this},v.prototype.stashList=function(d){return this._runTask(yl(b(arguments)||{},o(d)&&d||[]),f(arguments))};function Sr(d,g,A,W){return typeof A!="string"?n(`git.${d}() requires a string 'repoPath'`):g(A,c(W,u),p(arguments))}v.prototype.clone=function(){return this._runTask(Sr("clone",I,...arguments),f(arguments))},v.prototype.mirror=function(){return this._runTask(Sr("mirror",Et,...arguments),f(arguments))},v.prototype.mv=function(d,g){return this._runTask(ol(d,g),f(arguments))},v.prototype.checkoutLatestTag=function(d){var g=this;return this.pull(function(){g.tags(function(A,W){g.checkout(W.latest,d)})})},v.prototype.pull=function(d,g,A,W){return this._runTask(ll(c(d,u),c(g,u),p(arguments)),f(arguments))},v.prototype.fetch=function(d,g){return this._runTask(Ie(c(d,u),c(g,u),p(arguments)),f(arguments))},v.prototype.silent=function(d){return console.warn("simple-git deprecation notice: git.silent: logging should be configured using the `debug` library / `DEBUG` environment variable, this will be an error in version 3"),this},v.prototype.tags=function(d,g){return this._runTask(Cl(p(arguments)),f(arguments))},v.prototype.rebase=function(){return this._runTask(ot(["rebase",...p(arguments)]),f(arguments))},v.prototype.reset=function(d){return this._runTask(gl(ml(d),p(arguments)),f(arguments))},v.prototype.revert=function(d){let g=f(arguments);return typeof d!="string"?this._runTask(n("Commit must be a string"),g):this._runTask(ot(["revert",...p(arguments,0,!0),d]),g)},v.prototype.addTag=function(d){let g=typeof d=="string"?xl(d):n("Git.addTag requires a tag name");return this._runTask(g,f(arguments))},v.prototype.addAnnotatedTag=function(d,g){return this._runTask(_l(d,g),f(arguments))},v.prototype.deleteLocalBranch=function(d,g,A){return this._runTask(_(d,typeof g=="boolean"?g:!1),f(arguments))},v.prototype.deleteLocalBranches=function(d,g,A){return this._runTask(C(d,typeof g=="boolean"?g:!1),f(arguments))},v.prototype.branch=function(d,g){return this._runTask(O(p(arguments)),f(arguments))},v.prototype.branchLocal=function(d){return this._runTask(w(),f(arguments))},v.prototype.raw=function(d){let g=!Array.isArray(d),A=[].slice.call(g?arguments:d,0);for(let rt=0;rt<A.length&&g;rt++)if(!l(A[rt])){A.splice(rt,A.length-rt);break}A.push(...p(arguments,0,!0));var W=f(arguments);return A.length?this._runTask(ot(A,this._trimmed),W):this._runTask(n("Raw: must supply one or more command to execute"),W)},v.prototype.submoduleAdd=function(d,g,A){return this._runTask(bl(d,g),f(arguments))},v.prototype.submoduleUpdate=function(d,g){return this._runTask(kl(p(arguments,!0)),f(arguments))},v.prototype.submoduleInit=function(d,g){return this._runTask(wl(p(arguments,!0)),f(arguments))},v.prototype.subModule=function(d,g){return this._runTask(vl(p(arguments)),f(arguments))},v.prototype.listRemote=function(){return this._runTask(fl(p(arguments)),f(arguments))},v.prototype.addRemote=function(d,g,A){return this._runTask(cl(d,g,p(arguments)),f(arguments))},v.prototype.removeRemote=function(d,g){return this._runTask(pl(d),f(arguments))},v.prototype.getRemotes=function(d,g){return this._runTask(hl(d===!0),f(arguments))},v.prototype.remote=function(d,g){return this._runTask(dl(p(arguments)),f(arguments))},v.prototype.tag=function(d,g){let A=p(arguments);return A[0]!=="tag"&&A.unshift("tag"),this._runTask(ot(A),f(arguments))},v.prototype.updateServerInfo=function(d){return this._runTask(ot(["update-server-info"]),f(arguments))},v.prototype.pushTags=function(d,g){let A=ul({remote:c(d,u)},p(arguments));return this._runTask(A,f(arguments))},v.prototype.rm=function(d){return this._runTask(ot(["rm","-f",...a(d)]),f(arguments))},v.prototype.rmKeepLocal=function(d){return this._runTask(ot(["rm","--cached",...a(d)]),f(arguments))},v.prototype.catFile=function(d,g){return this._catFile("utf-8",arguments)},v.prototype.binaryCatFile=function(){return this._catFile("buffer",arguments)},v.prototype._catFile=function(d,g){var A=f(g),W=["cat-file"],rt=g[0];if(typeof rt=="string")return this._runTask(n("Git.catFile: options must be supplied as an array of strings"),A);Array.isArray(rt)&&W.push.apply(W,rt);let Le=d==="buffer"?Tl(W):ot(W);return this._runTask(Le,A)},v.prototype.diff=function(d,g){let A=u(d)?n("git.diff: supplying options as a single string is no longer supported, switch to an array of strings"):ot(["diff",...p(arguments)]);return this._runTask(A,f(arguments))},v.prototype.diffSummary=function(){return this._runTask(ht(p(arguments,1)),f(arguments))},v.prototype.applyPatch=function(d){let g=h(d)?S(a(d),p([].slice.call(arguments,1))):n("git.applyPatch requires one or more string patches as the first argument");return this._runTask(g,f(arguments))},v.prototype.revparse=function(){let d=["rev-parse",...p(arguments,!0)];return this._runTask(ot(d,!0),f(arguments))},v.prototype.clean=function(d,g,A){let W=Nt(d),rt=W&&d.join("")||c(d,u)||"",Le=p([].slice.call(arguments,W?1:0));return this._runTask(at(rt,Le),f(arguments))},v.prototype.exec=function(d){let g={commands:[],format:"utf-8",parser(){typeof d=="function"&&d()}};return this._runTask(g)},v.prototype.clearQueue=function(){return this},v.prototype.checkIgnore=function(d,g){return this._runTask(E(a(c(d,h,[]))),f(arguments))},v.prototype.checkIsRepo=function(d,g){return this._runTask(B(c(d,u)),f(arguments))},t.exports=v}});Jt();wt();var dd=class extends ct{constructor(e,t){super(void 0,t),this.config=e}};wt();wt();var St=class extends ct{constructor(e,t,s){super(e,s),this.task=e,this.plugin=t,Object.setPrototypeOf(this,new.target.prototype)}};Bt();ua();Oa();La();Na();Ua();Ka();function pd(e){return e?[{type:"spawn.before",action(r,i){e.aborted&&i.kill(new St(void 0,"abort","Abort already signaled"))}},{type:"spawn.after",action(r,i){function n(){i.kill(new St(void 0,"abort","Abort signal received"))}e.addEventListener("abort",n),i.spawned.on("close",()=>e.removeEventListener("abort",n))}}]:void 0}function md(e){return typeof e=="string"&&e.trim().toLowerCase()==="-c"}function gd(e,t){if(md(e)&&/^\s*protocol(.[a-z]+)?.allow/.test(t))throw new St(void 0,"unsafe","Configuring protocol.allow is not permitted without enabling allowUnsafeExtProtocol")}function yd(e,t){if(/^\s*--(upload|receive)-pack/.test(e))throw new St(void 0,"unsafe","Use of --upload-pack or --receive-pack is not permitted without enabling allowUnsafePack");if(t==="clone"&&/^\s*-u\b/.test(e))throw new St(void 0,"unsafe","Use of clone with option -u is not permitted without enabling allowUnsafePack");if(t==="push"&&/^\s*--exec\b/.test(e))throw new St(void 0,"unsafe","Use of push with option --exec is not permitted without enabling allowUnsafePack")}function bd({allowUnsafeProtocolOverride:e=!1,allowUnsafePack:t=!1}={}){return{type:"spawn.args",action(s,r){return s.forEach((i,n)=>{let a=n<s.length?s[n+1]:"";e||gd(i,a),t||yd(i,r.method)}),s}}}k();function wd(e){let t=Yt(e,"-c");return{type:"spawn.args",action(s){return[...t,...s]}}}k();var na=(0,Lt.deferred)().promise;function vd({onClose:e=!0,onExit:t=50}={}){function s(){let i=-1,n={close:(0,Lt.deferred)(),closeTimeout:(0,Lt.deferred)(),exit:(0,Lt.deferred)(),exitTimeout:(0,Lt.deferred)()},a=Promise.race([e===!1?na:n.closeTimeout.promise,t===!1?na:n.exitTimeout.promise]);return r(e,n.close,n.closeTimeout),r(t,n.exit,n.exitTimeout),{close(o){i=o,n.close.done()},exit(o){i=o,n.exit.done()},get exitCode(){return i},result:a}}function r(i,n,a){i!==!1&&(i===!0?n.promise:n.promise.then(()=>Gs(i))).then(a.done)}return{type:"spawn.after",action(i,n){return Vt(this,arguments,function*(a,{spawned:o,close:l}){var u,h;let c=s(),p=!0,f=()=>void(p=!1);(u=o.stdout)==null||u.on("data",f),(h=o.stderr)==null||h.on("data",f),o.on("error",f),o.on("close",b=>c.close(b)),o.on("exit",b=>c.exit(b));try{yield c.result,p&&(yield Gs(50)),l(c.exitCode)}catch(b){l(c.exitCode,b)}})}}}wt();function kd(e){return!!(e.exitCode&&e.stdErr.length)}function _d(e){return Buffer.concat([...e.stdOut,...e.stdErr])}function xd(e=!1,t=kd,s=_d){return(r,i)=>!e&&r||!t(i)?r:s(i)}function aa(e){return{type:"task.error",action(t,s){let r=e(t.error,{stdErr:s.stdErr,stdOut:s.stdOut,exitCode:s.exitCode});return Buffer.isBuffer(r)?{error:new ct(void 0,r.toString("utf-8"))}:{error:r}}}}k();var Cd=class{constructor(){this.plugins=new Set}add(e){let t=[];return bt(e).forEach(s=>s&&this.plugins.add(R(t,s))),()=>{t.forEach(s=>this.plugins.delete(s))}}exec(e,t,s){let r=t,i=Object.freeze(Object.create(s));for(let n of this.plugins)n.type===e&&(r=n.action(r,i));return r}};k();function Td(e){let t="--progress",s=["checkout","clone","fetch","pull","push"];return[{type:"spawn.args",action(n,a){return s.includes(a.method)?ma(n,t):n}},{type:"spawn.after",action(n,a){var o;a.commands.includes(t)&&((o=a.spawned.stderr)==null||o.on("data",l=>{let u=/^([\s\S]+?):\s*(\d+)% \((\d+)\/(\d+)\)/.exec(l.toString("utf8"));u&&e({method:a.method,stage:Sd(u[1]),progress:P(u[2]),processed:P(u[3]),total:P(u[4])})}))}}]}function Sd(e){return String(e.toLowerCase().split(" ",1))||"unknown"}k();function Od(e){let t=ya(e,["uid","gid"]);return{type:"spawn.options",action(s){return st(st({},t),s)}}}function Rd({block:e,stdErr:t=!0,stdOut:s=!0}){if(e>0)return{type:"spawn.after",action(r,i){var n,a;let o;function l(){o&&clearTimeout(o),o=setTimeout(h,e)}function u(){var c,p;(c=i.spawned.stdout)==null||c.off("data",l),(p=i.spawned.stderr)==null||p.off("data",l),i.spawned.off("exit",u),i.spawned.off("close",u),o&&clearTimeout(o)}function h(){u(),i.kill(new St(void 0,"timeout","block timeout reached"))}s&&((n=i.spawned.stdout)==null||n.on("data",l)),t&&((a=i.spawned.stderr)==null||a.on("data",l)),i.spawned.on("exit",u),i.spawned.on("close",u),l()}}}Jt();function Ed(){return{type:"spawn.args",action(e){let t=[],s;function r(i){(s=s||[]).push(...i)}for(let i=0;i<e.length;i++){let n=e[i];if(xe(n)){r(Fn(n));continue}if(n==="--"){r(e.slice(i+1).flatMap(a=>xe(a)&&Fn(a)||a));break}t.push(n)}return s?[...t,"--",...s.map(String)]:t}}}k();var Ad=fd();function Pd(e,t){let s=new Cd,r=ka(e&&(typeof e=="string"?{baseDir:e}:e)||{},t);if(!sr(r.baseDir))throw new dd(r,"Cannot use simple-git on a directory that does not exist");return Array.isArray(r.config)&&s.add(wd(r.config)),s.add(bd(r.unsafe)),s.add(Ed()),s.add(vd(r.completion)),r.abort&&s.add(pd(r.abort)),r.progress&&s.add(Td(r.progress)),r.timeout&&s.add(Rd(r.timeout)),r.spawnOptions&&s.add(Od(r.spawnOptions)),s.add(aa(xd(!0))),r.errors&&s.add(aa(r.errors)),new Ad(r,s)}Bt();var nl=Pd;var Fd=nl(),jd=async()=>{let{appname:e}=await al.default.prompt({type:"input",name:"appname",message:"Application app name?"}),t="https://github.com/l2700l/vkma-ts-template",s=process.cwd(),r=Tr.default.join(s,e??"vkma");try{console.log("Downloading template..."),await qd(t,r),console.log("Template downloaded successfully!"),$d(e??"vkma")}catch(i){console.error("Error downloading template:",i)}},qd=async(e,t)=>{await Fd.clone(e,t,["--depth=1"]);let s=Tr.default.join(t,".git");Cr.default.existsSync(s)&&Cr.default.rmSync(s,{recursive:!0})},$d=e=>{let t=process.env.npm_config_user_agent??"",s=/pnpm/.test(t)?"pnpm":/yarn/.test(t)?"yarn":"npm";console.log(),console.log("Next steps:"),console.log("1. cd",e),console.log("2.",s,"install"),console.log("3.",s,"run dev"),console.log(),console.log("Happy coding!")};jd();
